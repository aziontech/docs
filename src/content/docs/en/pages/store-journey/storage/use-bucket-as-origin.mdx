---
title: How to use an Edge Storage bucket as the backend of a static edge application
description: >-
  Learn how to use a bucket as the origin of a static edge application using
  Edge Storage and make the bucket content public.
meta_tags: >-
  edge storage, storage, cloud, s3, bucket, objects, files, storage, file
  storage, origin, object storage
namespace: documentation_products_sotre_storage_object_storage_origin
permalink: /documentation/products/store/storage/use-bucket-as-origin/
menu_namespace: storeMenu
---

import LinkButton from 'azion-webkit/linkbutton'
import Tabs from '~/components/tabs/Tabs'

import originRollout from '~/includes/snippets/originRollout/en/snippet.mdx'

</originRollout>

:::caution[Important]
You're viewing the latest version of this documentation. If your account hasn't been migrated yet, refer to the [legacy Use Bucket as An Origin Guide](/en/documentation/products/store/storage/use-bucket-as-origin/v3/).
:::


This guide walks you through setting a bucket as origin of an edge application using the [Azion API](https://api.azion.com/), [Azion CLI](/en/documentation/products/azion-cli/overview/), and [Azion Runtime](/en/documentation/runtime/api-reference/storage/).

<LinkButton link="/en/documentation/products/store/edge-storage/" label="go to Edge Storage reference" severity="secondary" target="_blank" />

---

## Create a bucket and upload files

This section describes how you can upload objects to a bucket and maintain project structure using the [Azion API](https://api.azion.com). In this scenario, you'll create a static application using two files, distributed into folders as follows:

<Code lang="txt" code={`src/index.html
src/styles/style.css
`} />

1. Create the following `index.html` file inside of a local `src` directory:

<Code lang="html" code={`<!-- src/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <h1>Hello world!</h1>
    <p>I am an object from a bucket.</p>
</body>
</html>
`} />

2. Now create the `style.css` file, which is referenced in the HTML, under the `styles` folder in the same directory:

<Code lang="css" code={`/* src/styles/style.css */
body {
background-color: black;
}

h1, p {
    color: #F3652B;
}
`} />

3. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/) and writing the desired bucket name in `name` to create a read-only bucket:

<Code lang="bash" code={`curl --location 'https://api.azion.com/v4/storage/buckets' \
--header 'Accept: application/json;' \
--header 'Content-Type: application/json' \
--header 'Authorization: Token [TOKEN VALUE]' \
--data '{
    "name": "app-origin",
    "edge_access": "read_only"
}'
`} />

4. You should receive the following response:

<Code lang="json" code={`{
  "state": "executed",
  "data": {
    "name": "app-origin",
    "edge_access": "read_only"
  }
}
`} />

5. Run the following `POST` requests in your terminal for each file, replacing `<bucket_name>` with the name of the bucket you just created:

    - For the `index.html` file, run the following command using `src/index.html` as the object key, and adding the object path as data:

<Code lang="bash" code={`curl --location 'https://api.azion.com/v4/storage/buckets/<bucket_name>/objects/src/index.html' \
--header 'Accept: application/json;' \
--header 'Content-Type: text/html' \
--header 'Authorization: Token [TOKEN VALUE]' \
--data '@./src/index.html'
`} />

    - For the `styles.css` file, run the following command using `src/styles/style.css` as the object key, and adding the object path as data:

<Code lang="bash" code={`curl --location 'https://api.azion.com/v4/storage/buckets/<bucket_name>/objects/src/styles/style.css' \
--header 'Accept: application/json;' \
--header 'Content-Type: text/css' \
--header 'Authorization: Token [TOKEN VALUE]' \
--data '@./src/styles/style.css'
`} />

6. You should receive the following responses for the files:

<Code lang="json" code={`{
    "state": "executed",
    "data": {
        "object_key": "src/index.html"
    }
}
`} />

<Code lang="json" code={`{
    "state": "executed",
    "data": {
        "object_key": "src/styles/style.css"
    }
}
`} />

:::caution[Warning]
When a bucket is configured with **read-write permissions**, any user can access and modify its content (for example, by sending a PUT request to overwrite files). If the bucket is used as an origin for an edge application, this configuration may expose the content to unauthorized modifications. However, suppose the bucket is accessed through an edge function. In that case, the risk is managed by the logic implemented in the function code, allowing developers to enforce stricter controls over who can access or modify the data. To mitigate risks, always verify the required permissions for each use case and implement proper access controls. Read more on [Authentication and permissions](/en/documentation/products/store/edge-storage/#authentication-and-permissions).
:::

---

## Create an edge application and set origin type to Edge Storage

Now that your bucket is populated with files, you can create a new edge application and a domain to set the bucket as the origin of the content and serve these objects.

<Tabs client:visible>
    <Fragment slot="tab.console">Console </Fragment>
    <Fragment slot="tab.api">API </Fragment>
    <Fragment slot="tab.cli">CLI </Fragment>


<Fragment slot="panel.console">
To facilitate this process, use the [Edge Application Proxy](/en/documentation/products/guides/edge-application-proxy-template/) template:

1. Access [Azion Console](https://console.azion.com).
    - If you don't have an account yet, create a new one [by visiting the sign-up page](https://console.azion.com/signup).
2. On the homepage, select the **+ Create** option.
3. Find the **Edge Application Proxy** card in the templates section and select it.
4. Give your application an easy-to-remember name.
5. In **Route to bypass**, type `/` to specify the root path of the application.
6. Wait for the deployment process to finish.
7. Copy the domain of the application, in the format `http://xxxxxxxxxx.map.azionedge.net/`.

:::note
The link to the edge application allows you to see it on the browser. However, it takes a certain time to propagate and configure the application in Azionâ€™s edge locations. It may be necessary to wait a few minutes for the URL to be activated and for the application page to be effectively displayed in the browser.
:::

Now you need to configure a new **Edge Connector** to link your application to your Edge Storage bucket. To do so:

1. [Access Azion Console](/en/documentation/products/guides/how-to-access-azion-console/) > **Edge Connector**.
2. Click the ** + Edge Connector** button.
3. In the **General** section, give your connector a unique and descriptive name (e.g., `My Edge Storage Connector`).
4. In the **Connector Type** section, select **Edge Storage**.
5. In the **Connection Options** section:
    - For **Bucket**, select the name of the bucket you created in the previous steps.
    - For **Prefix**, enter `/src` (or the prefix you used when uploading your objects).
6. Set the **Status** to **Active**.
7. Click the **Save** button.

To activate the Edge Connector in your edge application:

1. Access the **Rules Engine** tab.
2. Edit the default rule or add a new request rule.
3. In the **Criteria** section, to apply the Edge Connector for your whole application, set the **criteria** to `If ${uri} starts with /`.
4. In the **Behavior** section, select the Set Edge Connector behavior.
5. Select the Edge Connector you want to apply.
6. Click the **Save** button.
7. Wait some time for the changes to propagate to the edge.

Once the changes have been made, access `http://xxxxxxxxxx.map.azionedge.net/index.html` to see the HTML file you uploaded with the applied CSS style.
</Fragment>

<Fragment slot="panel.api">
1. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/):

<Code lang="bash" code={`
curl --request POST \
  --url https://api.azion.com/v4/edge_application/applications \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "edge storage app",
  "modules": {
    "edge_cache": {
      "enabled": true
    },
    "edge_functions": {
      "enabled": true
    },
    "application_accelerator": {
      "enabled": false
    },
    "image_processor": {
      "enabled": false
    },
    "tiered_cache": {
      "enabled": false
    }
  },
  "active": true,
  "debug": false
}'
`} />




2. You should receive a response similar to:

<Code lang="json" code={`{
  "state": "pending",
  "data": {
    "id": edge_application_id,
    "name": "edge storage app",
    "last_editor": "education1@azion.com",
    "last_modified": "2025-07-25T19:06:13.854005Z",
    "modules": {
      "edge_cache": {
        "enabled": true
      },
      "edge_functions": {
        "enabled": true
      },
      "application_accelerator": {
        "enabled": false
      },
      "image_processor": {
        "enabled": false
      },
      "tiered_cache": {
        "enabled": false
      }
    },
    "active": true,
    "debug": false,
    "product_version": "3.0"
  }
} />

3. Copy the value from the `edge_application_id` field and paste it in a text editing app to save it for later requests.

4. Run the following `POST` request in your terminal to create an Edge Connector, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/)

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/edge_connector/connectors \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "edge storage connector",
  "active": true,
  "type": "edge_storage",
  "attributes": {
    "bucket": "app-origin",
    "prefix": "/"
  }
}'
`} />

5. Copy the value from the `<edge_connector_id>` field and paste it in a text editing app to save it for later requests.

6. You should receive a response similar to:

<Code lang="json" code={`{
    {
      "id": <edge_connector_id>,
      "name": "edge storage connector",
      "last_editor": "education@azion.com",
      "last_modified": "2025-07-22T14:34:31.009649Z",
      "active": true,
      "product_version": "1.0",
      "type": "edge_storage",
      "attributes": {
        "bucket": "app-origin",
        "prefix": "/"
      }
    }
}' />

7. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/)

<Code lang="bash" code={`{curl --request POST \
  --url https://api.azion.com/v4/workspace/workloads \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "edge storage domain",
  "active": true,
  "infrastructure": 1,
  "protocols": {
    "http": {
      "versions": [
        "http1",
        "http2"
      ]
    }
  },
  "workload_domain_allow_access": true
}' />

8. You should receive a response similar to:

<Code lang="json" code={`{
  "state": "pending",
  "data": {
    "id": workload_id,
    "name": "edge storage domain",
    "active": true,
    "last_editor": "education@azion.com",
    "last_modified": "2025-07-25T18:58:25.817955Z",
    "infrastructure": 1,
    "tls": {
      "certificate": null,
      "ciphers": 7,
      "minimum_version": "tls_1_3"
    },
    "protocols": {
      "http": {
        "versions": [
          "http1",
          "http2"
        ],
        "http_ports": [
          80
        ],
        "https_ports": [
          443
        ],
        "quic_ports": null
      }
    },
    "mtls": {
      "verification": null,
      "certificate": null,
      "crl": null
    },
    "domains": [],
    "workload_domain_allow_access": true,
    "workload_domain": "xxxxxxxxxxx.azionedge.net",
    "product_version": "1.0"
  }
}' />


1. Copy the URL in the `workload_domain` value and paste it in a text editing app to access later. 


9. Run the following `POST` request to bind the Workload to your Edge Application, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/), `<edge_application_id>` with the ID of the edge application and <workload_id>` with the id of the Workload.



<Code lang="bash" code={`{curl --request POST \
  --url https://api.azion.com/v4/workspace/workloads/<workload_id>/deployments \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "Edge Storage App",
  "current": true,
  "active": true,
  "strategy": {
    "type": "default",
    "attributes": {
      "edge_application": <edge_application_id>
    }
  }
}' />


10. Run the following `POST` request in your terminal to create a **Rules Engine** rule, replacing `<edge_application_id>` variable with the Edge Application ID and `<edge_connector_id>`with the Edge Connector ID you copied previously:

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/edge_application/applications/1753190339/request_rules \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "string",
  "active": true,
  "criteria": [
    [
      {
        "conditional": "if",
        "variable": "${uri}",
        "operator": "starts_with",
        "argument": "/"
      }
    ]
  ],
  "behaviors": [
    {
      "type": "set_edge_connector",
      "attributes": {
        "value": <edge_connector_id>
      }
    }
  ]
}'
`} />

11. You should receive a response similar to:

<Code lang="json" code={`{
    ...
    {
  "state": "pending",
  "data": {
    "id": <rule_id>,
    "name": "string",
    "active": true,
    "criteria": [
      [
        {
          "conditional": "if",
          "variable": "${uri}",
          "operator": "starts_with",
          "argument": "/"
        }
      ]
    ],
    "behaviors": [
      {
        "type": "set_edge_connector",
        "attributes": {
          "value": <edge_connector_id>
        }
      }
    ],
    "description": "",
    "order": 1,
    "last_editor": "education@azion.com",
    "last_modified": "2025-07-25T19:29:30.684210Z"
  }
}
`} />



12. Wait some time for the changes to propagate.

Once the changes have been made, access the domain you created, in the format `http://xxxxxxxxxx.map.azionedge.net/index.html`, to see the HTML file you uploaded with the applied CSS style.

</Fragment>

<Fragment slot="panel.cli">
## Requirements 

- [Azion CLI installed](/en/documentation/products/azion-cli/overview/#installing-azion-cli). 
- [A personal token configured](/en/documentation/devtools/cli/globals/#token).

To create an edge application with the necessary configurations to use a bucket as origin: 

<Code lang="bash" code={`azion create edge-application --name "edge storage app" --delivery-protocol "http" --http3 false --origin-type "single_origin" --address "httpbin.org" --origin-protocol-policy "preserve" --host-header "${host}" --browser-cache-settings "honor" --browser-cache-settings-maximum-ttl 0 --cdn-cache-settings "override" --cdn-cache-settings-maximum-ttl 0
`} />

</Fragment>


</Tabs>

:::tip
After creating your application with an Edge Storage bucket as the origin, you can manage and configure settings, such as [cache settings](/en/documentation/products/guides/cache-settings/).
:::

Learn how to use an Edge Storage bucket as the origin of a static edge application. Watch the video below:
<div class="cms-embed">
  <iframe width="600" height="400" src="https://www.youtube.com/embed/jMuwaqTEolg?si=_7sgVIi7MeNH8Yf4" loading="lazy" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div>
