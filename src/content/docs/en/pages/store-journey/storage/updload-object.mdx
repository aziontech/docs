---
title: How to upload an object to an Edge Storage bucket
description: Discover how to upload files to an Edge Storage bucket with this guide.
meta_tags: edge storage, cloud storage, s3 bucket, file storage, upload files, Azion Edge Storage, object storage
namespace: documentation_products_store_storage_object_storage_upload
permalink: /documentation/products/store/storage/upload-object/
---

This guide walks you through uploading an object to an Edge Storage bucket using the [Azion API](https://api.azion.com/), [Azion CLI](/en/documentation/products/azion-cli/overview/), and [Azion Runtime](/en/documentation/runtime/api-reference/storage/).

import Tabs from '~/components/tabs/Tabs'

## Uploading an object to a bucket

<Tabs client:visible>
    <Fragment slot="tab.cli">Azion CLI</Fragment>
    <Fragment slot="tab.runtime">Azion Runtime</Fragment>
    <Fragment slot="tab.api">API</Fragment>

<Fragment slot="panel.cli">
## Requirements 

- [Azion CLI installed](/en/documentation/products/azion-cli/overview/#installing-azion-cli). 
- [A personal token configured](/en/documentation/devtools/cli/globals/#token).

To updload an object to an Edge Storage bucket: 

```bash 
azion update edge-storage object --bucket-name bucketname  --source pathtoyourfile --object-key objectname
```

</Fragment>

<Fragment slot="panel.api">

To upload an object, run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/), `<bucket_name>` with the name of your bucket, `<object_key>` with an ID or name for the object, the `Content-Type` header with the MIME type being submitted, and the object sent as a data binary:

```bash
curl --location 'https://api.azion.com/v4/storage/buckets/<bucket_name>/objects/<object_key>' \
--header 'Accept: application/json; version=3' \
--header 'Content-Type: text/csv' \
--header 'Authorization: Token [TOKEN VALUE]' \
--data '@./path/file.csv'
```

You should receive the following response:

```json
{
    "state": "executed",
    "data": {
        "object_key": "folder/csv-file"
    }
}
```

</Fragment>

<Fragment slot="panel.runtime">

You can create an edge function to upload objects to your bucket using a `POST` console command and see if an object is available using a `GET` console command. To do so:

1. Access [Azion Console](/en/documentation/products/guides/how-to-access-rtm/) > **Edge Functions**.
2. Click the **Add Function** button.
3. Name your function. Example: `my-bucket POST+GET`.
4. In the **Code** tab, add the following JavaScript code:

```js
import Storage from "azion:storage";
async function doGet(path, bucket_name) {
    console.log(`Path: ${path}`);
    const storage = new Storage(bucket_name);
    // content is an StorageObject
    const asset = await storage.get(path);
    return new Response(await asset.arrayBuffer(), {
        headers: {
            "Content-Type": asset.contentType
        },
    });
}

async function doPost(path, content_type, value, bucket_name) {
    console.log(`Path: ${path}`);
    let options = {
        "Content-Type": content_type
    }
    console.log(`Options: ${options}`);
    const storage = new Storage(bucket_name);
    await storage.put(path, value, options);
    return new Response("Object added.");
}

async function router(event) {
    const request = event.request;
    const method = request.method;
    const path = decodeURI(new URL(request.url).pathname);
    const bucket_name = event.args.bucket;
    if (method === "POST") {
        let content_type = request.headers.get("Content-Type");
        let content = await request.arrayBuffer();
        return doPost(path, content_type, content, bucket_name);
    } else if (method === "GET") {
        return doGet(path, bucket_name);
    } else {
        throw new Error(`Invalid method: ${method}. Expected POST or GET.`);
    }
}
addEventListener("fetch", (event) => {
    event.respondWith(
        router(event)
    );
});
```

| Variable | Description |
| --- | --- |
| `path` | Path to the object. Example: `./path/file.csv` |
| `bucket_name` | The name of the bucket. Example: `my-bucket` |
| `content_type` | The MIME type of the object. Example: `text/csv` |
| `value` | The contents of the object as a data binary |

5. In the **Arguments** tab, add the object with the `bucket` property and, as a value, the name of the bucket as a string.

```json
{
  "bucket": "my-bucket"
}
```

6. Click the **Save** button.

:::note
See the [Edge Storage API](/en/documentation/runtime/api-reference/storage/) reference for more details on functions available for other types of requests.
:::

Once you have the edge function ready, you need to create an edge application that will proxy the upload process for the bucket and instantiate the edge function.

<LinkButton link="/en/documentation/products/build/edge-application/first-steps/" label="Go to Edge Application first steps" severity="secondary" target="_blank" />
<LinkButton link="/en/documentation/products/guides/build/instantiate-edge-functions/" label="Go to how to instantiate an edge function" severity="secondary" target="_blank" />

</Fragment>
</Tabs>
