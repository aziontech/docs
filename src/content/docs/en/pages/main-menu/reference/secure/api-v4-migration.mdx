---
title: API v4 Migration
description: >-
  Find detailed informations about Azions plan for migration to our new API v4.
meta_tags: 'edge application, workloads, secure'
namespace: documentation_products_secure_apiv4_migration
permalink: /documentation/products/secure/api-v4-migration/
---

import LinkButton from 'azion-webkit/linkbutton'
import Code from '~/components/Code/Code.astro'

## Migration overview

Azion is rolling out API v4 in the coming months to improve platform performance, flexibility, and resource management. This update is more than an API change, it introduces new core concepts, such as **Workloads** and **Edge Connector**, and brings significant enhancements to both the API and Azion Console.

API v4 features a new asynchronous, event-driven architecture designed for higher performance and resilience. The new Workload resource model centralizes configuration, making it easier to manage, reuse, and scale your applications. Edge Connector enables more flexible and secure backend integrations.

Azion API v4 is now available in `Preview` and will be released for General Availability (GA) in 30 days.

**Key points about the migration**:

- The migration affects both the platform (with the introduction of Workloads and Edge Connector) and the API endpoints.
- Some configuration settings have moved to new locations to improve reusability and clarity.
- New personal accounts created from **August 1, 2025**, will use API v4 by default. Existing accounts will be migrated in waves; see the migration schedule below for details.
- Azion will contact customers with a Technical Account Manager contract to coordinate the migration. Developer-tier accounts will migrate automatically.
- During the transition, you may see documentation with banners allowing you to switch between v3 and v4 versions of a page.

API v4 represents a technological shift, providing a foundation for future features and improved operational efficiency across the Azion Web Platform.

---

## API migration

All API endpoints will be migrated to v4 in waves. To view the available endpoints and parameters, see the [API v4 reference](api.azion.com/v4)

API v3 is now **deprecated** and will no longer receive updates. It will be discontinued on **March 1, 2026**. After this date, all operations must be performed exclusively using API v4.

### Required action

Automations, scripts, and CI/CD pipelines connected to Azion must be updated to use API v4 by the specified deadline.

### New Features

- JWT/Bearer authentication.
- Activity History via GraphQL for full auditability.
- New Event driven Architecure

### Migration Benefits

- Improved performance
- Increased flexibility

---

## Changes in Edge Applications

The functionality of Edge Applications remains unchanged. However, some configuration options that were previously managed within **Edge Applications** have been moved to other components as part of the migration.

| Setting                                      | New Location      |
|------------------------------------------------------|---------------------------------|
| Delivery Settings                                         | Workloads                  |
| Origin Settings                                      | Edge Connector                  |
| Error Responses                                      | Custom Pages                    |
| Load Balancer                                        | Edge Connector                  |

---

## Workloads

Azion has adopted the Workload concept to centralize application logic, separating business rules from infrastructure. This enables versioning, reuse, and consistent policy application across environments, following a model inspired by Kubernetes.

**Workloads** replace **Azion Domains**. All settings previously managed in **Azion Domain**s are now organized under **Workloads**.

### Operational Changes and User-Facing Impact

The following settings have moved from **Azion Domains** to  **Workloads**.

| Setting                        | Previous Location      | New Location in v4         |
|---------------------------------|-----------------------|----------------------------------------|
| Environment Type                | Domains               | Workload (top-level)                   |
| Domain Settings                 | Domains               | Workload > Domain Settings             |
| Edge Application                | Domains > Settings    | Workload > Deployment Settings         |
| Edge Firewall                   | Domains > Settings    | Workload > Deployment Settings         |
| CNAME                           | Domains > Settings    | Workload > Domain Settings             |
| Digital Certificate             | Domains > Settings    | Workload > Protocol Settings           |
| CNAME Access Only               | Domains > Settings    | Workload > Domain Settings             |
| mTLS (Mutual TLS) Settings      | Domains               | Workload > Domain Settings             |

**Delivery Settings** previously configured within Edge Application, now set in **Workloads** under **Protocol Settings**:

- Protocol Settings
- Delivery Ports
- Minimum TLS version
- TLS Ciphers

#### Notable Behavioral Changes

- **CNAME Access Only**
  - *Previous behavior*: When enabled, the application could only be accessed via CNAME (e.g., `app.example.com`).
  - *New behavior*: Replaced by “Allow access via Workload Domain,” enabling access through the auto-generated workload URL (e.g., `xxxxxxxx.map.azionedge.net`).

#### API Usage

Each Workload is implicitly associated with a Deployment. The Deployment defines the relationship between the Workload and the Edge Application (mandatory), as well as optional components such as Edge Firewall and Custom Pages.

When creating a Workload via the API, you must also create a Workload Deployment to bind the Workload to an Edge Application. This association ensures that the Workload is correctly linked to the intended Edge Application. When using the Console, this association is created automatically.

##### Example requests

**Creating a Workload**:

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/workspace/workloads \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "Example Workload",
  "active": true,
  "infrastructure": 1,
  "protocols": {
    "http": {
      "versions": [
        "http1",
        "http2"
      ]
    }
  },
  "workload_domain_allow_access": true
}'
`} />


**Creating a Workload Deployment**:

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/workspace/workloads/<workload_id>/deployments \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "Workload Deployment Example",
  "current": true,
  "active": true,
  "strategy": {
    "type": "default",
    "attributes": {
      "edge_application": <edge_application_id>
    }
  }
}'
`} />

:::tip
For more information about the API parameters visit the [Workloads API Reference](https://api.azion.com/v4#/operations/GetWorkspaceWorkloads)
:::

### What happens to my existing Domains?

Domains will be automatically converted to Workloads in phases, ensuring compatibility with the original configurations. The migration will occur in waves. For more information about migration dates, see the details provided below.

After your account is migrated youll will not be able to create new Domains.

### Required action

If you have an automation that currently uses the **Domains** API Endpoints you must update it to use v4 Workloads endpoints.

### New Features

- Introduction of [Custom Pages](#custom-pages), which replaces and expands on the previous “Error Responses” feature. More details are provided below.
- Azion Custom Domain allows you to set up a custom domain for your application using the format `example.azion.app`.

### Migration Benefits

- **Improved Organization**: Logically group all resources related to an application or service into a single unit (Workload), making management, visualization, and navigation more efficient. This structure creates clear relationships between components.
- **Scalability and Flexibility**: Simplifies deployment, updates, and scaling of complex applications by allowing all required components to be managed as part of a Workload.
- **Simplified Management**: Centralizes configuration and control of different application elements, reducing operational complexity.
- **Foundation for New Capabilities**: Required for future features such as configuration versioning and more intuitive service connections, for example, linking a domain directly to Edge Storage without relying on an Edge Application.

<LinkButton link="/documentation/products/secure/workloads" text="Visit the Workloads Reference" />

---

## Edge Connector

**Edge Connector** centralizes connection settings, allowing you to reuse them across multiple applications, and provides granular control over performance, security, and routing through a unified interface for connecting **Edge Applications** to an origin (your data source), natively incorporating features such as load balancing, HMAC authentication, and Origin Shield.

**Edge Connector*** replaces Edge Appllication's **Origin** settings. All settings previously managed in Edge Aplications **Origins** tab are now organized under **Edge Connector***.

### Operational Changes and User-Facing Impact

All settings previously managed in Edge Aplications **Origins** tab are now organized under **Edge Connector***.

| Setting                        | Previous Location      | New Location in v4         |
|-------------------------|------------------------------- |----------------------------------------------------|
| Type                    | Host Settings                  | Connector Type                                     |
| Protocol Policy         | Host Settings                  | Connector Options > Transport Protocol Policy       |
| Host Header             | Host Settings                  | Connector Options > Host                           |
| Address                 | Host Settings                  | Connector Options > Address Management > Address    |
| Path                    | Host Settings                  | Connector Options > Path                           |
| HMAC Authentication     | Host Settings                  | HMAC                                      |
| Connection Timeout      | Host Settings > Timeouts       | Load Balancer Configuration > Connection Timeout    |
| Between Bytes Timeout   | Host Settings > Timeouts       | Load Balancer Configuration > Read/Write Timeout    |

#### Notable Behavioral Changes

- **Connector Type**
  - *Previous behavior*: Options included `Single Origin` and `Load Balancer`. This defined whether you could configure one or multiple origins.
  - *New behavior*: Single Origin and Load Balancer have been unified into the `HTTP` type. When using multiple origins, you must enable the **Load Balancer Module** to add more origins. 

- **HMAC Authentication**
  - *Previous behavior*: Availiable when configuring an origin.
  - *New behavior*: Now you must enable the **Origin Shield Module** when configuring an `HTTP` type **Edge Connector**.

#### API Usage

You can manage **Edge Connectors** and their configuration through the API using the available v4 endpoints. Refer to the [API reference](https://api.azion.com/v4#/operations/GetEdgeConnectorConnectors) for details on supported operations and parameters.

##### Example requests

**Creating a Edge Connector with the Edge Storage Connector Type**:

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/edge_connector/connectors \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "edge storage connector",
  "active": true,
  "type": "edge_storage",
  "attributes": {
    "bucket": "app-origin",
    "prefix": "/"
}'
`} />

**Creating a Edge Connector with the HTTP Connector Type**:

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/edge_connector/connectors \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
    "name": "example.com",
    "active": true,
    "type": "http",
    "attributes": {
      "addresses": [
        {
          "active": true,
          "address": "httpbin.org",
          "http_port": 80,
          "https_port": 443,
          "modules": null
        }
      ],
      "connection_options": {
        "dns_resolution": "preserve",
        "transport_policy": "preserve",
        "http_version_policy": "http1_1",
        "host": "httpbin.org",
        "path_prefix": "/",
        "following_redirect": true,
        "real_ip_header": "X-Real-IP",
        "real_port_header": "X-Real-PORT"
      },
      "modules": {
        "load_balancer": {
          "enabled": false,
          "config": null
        },
        "origin_shield": {
          "enabled": false,
          "config": null
        }
      }
    }
  }'
`} />

:::tip
For more information about the API parameters visit the [Edge Conenctor API Reference](https://api.azion.com/v4#/operations/GetEdgeConnectorConnectors)
:::

### What happens to my existing Origins?

Existing Origins will be automatically converted to **Edge Connectors** in phases, maintaining compatibility with the original configurations. The migration will occur in waves. For more information about migration dates, see the details provided below.

### Required action

If you have an automation that currently uses the **Edge Application - Origins** API Endpoints you must update it to use v4 endpoints.

### New Features

- **Configuration reusability**: An Edge Connector can be connected to multiple Edge Applications

### Migration Benefits

**Simplified Backend Management**: Edge Connector centralizes all backend connection definitions, reducing configuration complexity. Multiple **Edge Applications** can use a single **Edge Connector**, streamlining maintenance and ensuring configuration consistency.
**Future-Ready Architecture**: **Edge Connector** provides the foundation for upcoming Azion Web Platform features and optimizations, ensuring your Edge Applications are ready to leverage new capabilities as they become available.

<LinkButton link="/documentation/products/secure/edge-connector" text="Visit the Edge Connector Reference"/>

---

## Custom Pages

**Custom Pages** is an Azion feature that allows you to customize error pages for users based on the status code received from an [Edge Connector](/en/documentation/products/secure/edge-connector/) when fetching the content from your origin.

**Custom Pages*** replaces Edge Appllication's **Error Responses** settings. All settings previously managed in Edge Aplications **Error Responses** tab are now organized under **Custom Pages**.

### Operational Changes and User-Facing Impact

All settings previously managed in Edge Aplications **Error Responses** tab are now organized under **Custom Pages**.


| Setting                | Previous Location                                 | New Location in v4                                      |
|-----------------------------|---------------------------------------------------|---------------------------------------------------------|
| Default Error Response      | Edge Application > Error Responses                | Custom Pages > Page Codes              |
| Custom Error Response       | Edge Application > Error Responses                | Custom Pages                                            |
| Status Code                 | Edge Application > Error Responses > Custom Error | Custom Pages > Status Configuration > Page Code         |
| Page Path                   | Edge Application > Error Responses > Custom Error | Custom Pages > Response Details > Page Path (URI)       |
| Default Response TTL        | Edge Application > Error Responses > Custom Error | Custom Pages > Response Details > Response TTL          |
| Set Origin                  | Edge Application > Error Responses > Set Origin   | Custom Pages > Response Details > Page Path (URI)       |

#### Notable Behavioral Changes

- **Relationship**
  - *Previous behavior*: Error pages were a part of an **Edge Application**.
  - *New behavior*: Custom Pages are separate resources and are linked to an **Workload**.

#### API Usage

You can manage **Custom Pages** and their configuration through the API using the available v4 endpoints. Refer to the [API reference](api.azion.com/v4#/operations/GetWorkspaceCustomPages) for details on supported operations and parameters.

To use an **Custom Page** you must link it to an **Workload** using the **Workload deployment** Endpoint. When using the Console, this association is created under an Workload's Deployment Settings.

##### Example requests

**Creating a Custom Page**:

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/workspace/custom_pages \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "401 error page",
  "active": true,
  "pages": [
    {
      "code": "401",
      "page": {
        "type": "page_connector",
        "attributes": {
          "connector": <edge_connector_id>,
          "ttl": 300,
          "uri": "/path/error_page.html",
          "custom_status_code": 100
        }
      }
    }
  ]
}'
`} />


**Binding an Custom Page to an Workload Deployment**:

<Code lang="bash" code={`curl --request POST \
  --url https://api.azion.com/v4/workspace/workloads/<workload_id>/deployments \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "Workload Deployment Example",
  "current": true,
  "active": true,
  "strategy": {
    "type": "default",
    "attributes": {
      "edge_application": <edge_application_id>
      "custom_page": <custom_page_id>
    }
  }
}'
`} />


:::tip
For more information about the API parameters visit the [Custom Pages API Reference](https://stage-api.azion.com/v4#/operations/GetWorkspaceCustomPages)
:::

### What happens to my existing Error Responses?

Existing Error Responses will be automatically converted to **Custom Pages** in phases, maintaining compatibility with the original configurations. The migration will occur in waves. For more information about migration dates, see the details provided below.

### New Features

- **Response Details**: Customize the response for this status code. Specify the URI, status code, TTL, content type, and the response body to be returned to the client.

### Migration Benefits


<LinkButton link="/documentation/products/secure/custom-pages" text="Visit the Custom Pages Reference"/>

---

## Planned migration timeline

| Scope | Developer | Business | Enterprise | Mission Critical |
| --- | --- | --- | --- | ---|
|Planned Migration Date | 100 | 100 | 100 | 1,000 |

---

## Recommendations

Here are recommended actions to ensure a smooth migration:

- **Monitor Azion communications**: Stay informed about migration dates, guides, and any tools provided for the transition.
- **Plan your migration**: Assess how your current settings will fit into the new structure and strategically plan the migration of your resources.
- **Prepare your team**: Ensure your team understands the Workloads concept and its impact on application development and deployment on the Azion platform.
- **Test new features**: As the new features are implemented, test the new capabilities to optimize your applications and services.

---


---
## Q&A

### How can i test the new features?

Starting Augst 1st 2025, new Developer accounts will have access to the new features. You can create a personal account not linked to your companys account, and have access to test the new features.

### Do i Have to Do Something?

Most users will not need to take any action, as the migration process is automatic and preserves existing configurations. However, if you use custom automation, scripts, or CI/CD pipelines that interact with the previous API endpoints, you must update them to use the new v4 endpoints. Review your integrations to ensure compatibility after migration.

## Need Assistance?

You can contact our support team or ask Azion Copilot