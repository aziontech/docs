---
title: Work with Rules Engine
description: insert later
meta_tags: build
namespace: docs_guides_build_instantiate_edge_functions
permalink: /documentation/products/guides/build/instantiate-edge-functions/
---

With rules, you can automate data flows or execute tasks based on incoming requests or outcoming responses based on pre-defined criteria that activate specific behaviors in your application.

Rules are composed of two major elements: **Criteria** and **Behaviors**. Criteria are what determine what will trigger the execution of the rule while **Behaviors** are the actions that should be executed.

Criteria can be customized to your needs through the use of **variables**, which will represent a specific value from your edge application or the request itself. You can then use **comparison operators** to match the variable against an **argument**, which is a value that you can determine. You can also use **logical operators** to add extra criteria and determine how they interact.

As for Behaviors, they are a set of specific actions that your application can perform. Some behaviors also take specific directives in the form of **arguments**.

<Button href="/en/documentation/products/edge-application/rules-engine/" text="Go to Rules Engine documentation"></Button>

To create a rule, you'll need:

- An [Azion account](link_accounts).
- An [edge application](link_build_with_edge_app).
- An [Azion domain](link_config_domain).

You can instantiate create rules through [Real-Time Manager (RTM)](#via-rtm) or the [Azion API](#via-api).

## Via RTM

In this section, you'll create two rules, one in each available phase, using **Rules Engine**. Rules created in the **Request phase** will be executed as soon as an end-user makes a request to your edge application while a rule in the **Response phase** will be executed before the response is delivered to the end-user. 

To unlock all available options to customize your rules, you'll need to activate the **Application Acceleration** module:

1. [Access RTM](link_rtm).
2. On the upper-left corner of the page, open the **Products menu**, represented by three horizontal lines, and select **Edge Application**.
3. Click the edge application you want to configure. 
4. Activate the **Application Acceleration** module.
5. Click the **Save** button.

Starting with the request phase, these next steps will help you create a rule that rewrites a request. This way, you can create a rule to deliver content to an end-user from a specific URI without requiring that the exact path from the origin to be present in the request.

Assuming that your goal would be to deliver the contents of the page `/content/page.html` when a client makes a request for `xxxxxxxxxx.map.azionedge.net/page`. To create a rule that will rewrite this request:

1. Navigate to the **Rules Engine** tab.
2. Click the **Add Rule** button.
3. On the dropdown menu, select **Request Phase**.
4. Give your rule a name and, if necessary, a description.
5. In the **Criteria** section, select the `${uri}` variable.
6. As a comparison operator, select **is equal to**.
7. As an argument, add the value `/page`.
8. In the **Behaviors** section, select **Rewrite Request**.
9. As an argument, add `${uri}content/page.html`
10. Click the **Save** button.

Now, when a request is made to `xxxxxxxxxx.map.azionedge.net/page`, end-users should see the contents from the `/content/page.html` page without having to specify the entire address in their browser.

As for the response page, you can create a rule that, for example, removes an HTTP header from the response using the **Filter Response Header** behavior.

The `Server` header stores information about the server that generated the response. By removing this header, end-users won't receive information about the infrastructure of your application, enhancing your security by reducing the information available to potential attackers.

:::note
Exercise caution when removing any headers from your edge application and ensure that this action doesn't interfere in any applicable standards and guidelines.
:::

To filter the `Server` header from the response:

1. Navigate to the **Rules Engine** tab.
2. Click the **Add Rule** button.
3. On the dropdown menu, select **Response Phase**.
4. Give your rule a name and, if necessary, a description.
5. In the **Criteria** section, select the `${uri}` variable.
6. As a comparison operator, select **starts with**.
7. As an argument, add the value `/`.
8. In the Behaviors section, select **Filter Response Header**.
9. As an argument, add `Server`.
10. Click the **Save** button.

Now, when a request is made to your application, the `Server` header will be removed from the response.
