---
title: How to associate domains on Data Stream
description: >-
  When associating domains with Data Stream, the events related to the specified
  domains will be collected and sent to its endpoint.
meta_tags: 'Data Stream, domains'
namespace: documentation_dts_associate_domains
permalink: /documentation/products/guides/data-stream-associate-domains/
---

import Tabs from '~/components/tabs/Tabs'
import Code from '~/components/Code/Code.astro'
import InterfaceNote from '~/includes/snippets/InterfaceNote/en/snippet.mdx'
import Apiv4Rollout from '~/includes/snippets/apiv4Rollout/en/snippet.mdx'

<Apiv4Rollout />

[Data Stream](/en/documentation/products/observe/data-stream/) is an **Observe** product that allows you to feed your SIEM, big data, and stream processing platforms with the event logs from your applications on Azion in real time.

When you associate domains with Data Stream, the events related to the specified domains are collected and sent to the endpoint you configure through a stream. You can associate one or more of your domains registered with Azion to a stream.

:::tip
If you're not sure which steps apply to your account, see [this guide](/en/documentation/products/guides/verify-account-migration/) to determine if your account has already been migrated.
:::

---

## Creating a Data Stream with domain association

<Tabs client:visible>
<Fragment slot="tab.consoleworkloads">Console - Workloads</Fragment>
<Fragment slot="tab.consoledomain">Console - Domains</Fragment>
<Fragment slot="tab.apiv4">API v4</Fragment>
<Fragment slot="tab.apiv3">API v3</Fragment>

<Fragment slot="panel.consoleworkloads">

To create a Data Stream and associate workloads:

1. Access [Azion Console](https://console.azion.com).
2. On the upper-left corner, select **Data Stream** on the **Observe** section.
3. Click **+ Stream**.
4. Choose a name for your stream.
5. On the **Source** dropdown menu, select the one you want to use.
6. On the **Template** dropdown menu, select the one you want to use.
7. On **Workloads** > **Option**, select between **All Current and Future Workloads** or **Filter Workloads**.

**If you've selected Filter Workloads:**

On the **Available Workloads** box, you can:
- Type characters or words to find workloads or scroll through the list of your workloads.
- Select each workload you want to associate with this stream and click the `>` button.
- Select multiple workloads by using `ctrl` on Windows and Linux or `command` on Mac and click the `>` button.
- Select `>>` to select all workloads presented on the list.

After you click the `>` button, the selected workloads are moved to the **Chosen Workloads** box. You can also use the `<` button to remove specific workloads already chosen or select `<<` to remove all workloads.

**If you've selected All Workloads:**

Azion automatically selects all *current* and *future* workloads associated to your Azion Console account using this stream.

8. Fill in the remaining [mandatory fields to configure your stream](/en/documentation/products/guides/use-data-stream/).
9. Make sure the **Active** switch is on.
10. Click **Save**.

</Fragment>

<Fragment slot="panel.consoledomain">

To create a Data Stream and associate domains:

1. Access [Azion Console](https://console.azion.com).
2. On the upper-left corner, select **Data Stream** on the **Observe** section.
3. Click **+ Stream**.
4. Choose a name for your stream.
5. On the **Source** dropdown menu, select the one you want to use.
6. On the **Template** dropdown menu, select the one you want to use.
7. On **Domains** > **Option**, select between **All Current and Future Domains** or **Filter Domains**.

**If you've selected Filter Domains:**

On the **Available Domains** box, you can:
- Type characters or words to find domains or scroll through the list of your domains.
- Select each domain you want to associate with this stream and click the `>` button.
- Select multiple domains by using `ctrl` on Windows and Linux or `command` on Mac and click the `>` button.
- Select `>>` to select all domains presented on the list.

After you click the `>` button, the selected domains are moved to the **Chosen Domains** box. You can also use the `<` button to remove specific domains already chosen or select `<<` to remove all domains.

**If you've selected All Domains:**

Azion automatically selects all *current* and *future* domains associated to your Azion Console account using this stream.

8. Fill in the remaining [mandatory fields to configure your stream](/en/documentation/products/guides/use-data-stream/).
9. Make sure the **Active** switch is on.
10. Click **Save**.

</Fragment>

<Fragment slot="panel.apiv4">

To create a Data Stream with workload association via API v4:

1. First, list available workloads to get their IDs:

<Code lang="bash" code={`curl --request GET \\
  --url https://api.azion.com/v4/workspace/workloads \\
  --header 'Accept: application/json' \\
  --header 'Authorization: Token [TOKEN VALUE]'`} />

2. Create a Data Stream with workload association:

<Code lang="bash" code={`curl --request POST \\
  --url https://api.azion.com/v4/data_stream/streams \\
  --header 'Accept: application/json' \\
  --header 'Authorization: Token [TOKEN VALUE]' \\
  --header 'Content-Type: application/json' \\
  --data '{
    "name": "My Workload Stream",
    "template_id": 2,
    "data_source": "http",
    "active": true,
    "endpoint": {
      "endpoint_type": "standard",
      "url": "https://example.com/endpoint",
      "log_line_separator": "\\n",
      "payload_format": "$dataset",
      "max_size": 1000024
    },
    "workload_ids": [<workload_id_1>, <workload_id_2>],
    "all_workloads": false
  }'`} />

| Key | Description |
| --- | --- |
| `workload_ids` | Array of workload IDs to associate with the stream |
| `all_workloads` | Set to `true` to associate all current and future workloads |

:::tip
Check the [Data Stream API documentation](https://api.azion.com/v4#/operations/GetDataStreamStreams) for more details.
:::

</Fragment>

<Fragment slot="panel.apiv3">

To create a Data Stream with domain association via API v3:

1. First, list available domains to get their IDs:

<Code lang="bash" code={`curl --request GET \\
  --url https://api.azionapi.net/data_streaming/domains \\
  --header 'Accept: application/json; version=3' \\
  --header 'Authorization: Token [TOKEN VALUE]'`} />

2. Create a Data Stream with domain association:

<Code lang="bash" code={`curl --request POST \\
  --url https://api.azionapi.net/data_streaming/streamings \\
  --header 'Accept: application/json; version=3' \\
  --header 'Authorization: Token [TOKEN VALUE]' \\
  --header 'Content-Type: application/json' \\
  --data '{
    "name": "My Domain Stream",
    "template_id": 2,
    "data_source": "http",
    "active": true,
    "endpoint": {
      "endpoint_type": "standard",
      "url": "https://example.com/endpoint",
      "log_line_separator": "\\n",
      "payload_format": "$dataset",
      "max_size": 1000024
    },
    "domain_ids": [<domain_id_1>, <domain_id_2>],
    "all_domains": false
  }'`} />

| Key | Description |
| --- | --- |
| `domain_ids` | Array of domain IDs to associate with the stream |
| `all_domains` | Set to `true` to associate all current and future domains |

:::tip
Check the [Data Stream API documentation](https://api.azionapi.net/api/v3#/Data%20Stream) for more details.
:::

</Fragment>

</Tabs>

Now, the events associated with the domains or workloads you selected will be collected and sent to its endpoint through the configured stream.

Watch a video tutorial on How to associate domains on Data Stream on Azionâ€™s YouTube channel:

<iframe
   src="https://www.youtube.com/embed/soyIbJW0VdQ"
   loading="lazy"
   width="600"
   height="400"
   title="How to associate domains on Data Stream"
   frameborder="0"
   allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
   allowfullscreen></iframe>




