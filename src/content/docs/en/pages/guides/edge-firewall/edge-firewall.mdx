---
title: Azion Edge Firewall — multi-layered security in Edge
description: >-
  For online service providers like e-commerce, internet banking and media
  businesses.
meta_tags: 'firewall, security,'
namespace: docs_use_case_edge_firewall
permalink: /documentation/products/guides/edge-firewall/
---

import Tabs from '~/components/tabs/Tabs'
import Code from '~/components/Code/Code.astro'
import Apiv4Rollout from '~/includes/snippets/apiv4Rollout/en/snippet.mdx'

<Apiv4Rollout />

For online service providers like e-commerce, internet banking and media businesses, investing in security is as important as investing in the development of new applications, websites or integrating APIs. Every day, new threats are discovered and, in order to protect yourself from the activities of cybercriminals, it is necessary to constantly update security policies and adopt internet security tools, such as firewalls.

The high cost of maintaining an environment, that can both support a large number of requests and, at the same time, be protected from external threats, can make business expansion unfeasible. What's more, they may be essential, but traditional security solutions can use up a lot of your infrastructure's important resources, which can result in a loss of performance. Edge computing solutions, with their real-time processing, are a way you can both guarantee your applications' security and maintain performance, at an affordable cost.

:::tip
If you're not sure which steps apply to your account, see [this guide](/en/documentation/products/guides/verify-account-migration/) to determine if your account has already been migrated.
:::

## Real-time Security with Edge Computing 

The Azion **Edge Firewall** is a multi-layered security platform that provides Edge Computing solutions to keep your applications, APIs and websites safer. By running directly at the edge of the network, our solutions are highly scalable and capable of dealing in real time with the *OWASP Top 10 Vulnerabilities*, mass attacks (DoS and DDoS) and even “zero-day” vulnerabilities, without any drop in performance by your services.

See how the Azion **Edge Firewall** can help you:

* **Network Layer Protection**: constructs a security wall around your content, web applications and the source infrastructure. Protect yourself form the sort of data theft that can cause huge financial and reputational damage, blocking malicious attacks through smart rules that include network blocking (black and white lists of IP addresses, ASN numbers, countries or regions), limiting transfer rates, and more.
* **Web Application Firewall (WAF)**: create highly customizable rules, with real-time configuration updates, to protect any type of web application, including e-commerce, Content Management System (CMS) or internet banking, against the *OWASP Top 10 vulnerabilities*, including critical attacks on the application layer, such as *SQL Injection*, or new and evolving threats.
* **DDoS Protection** is the result of our globally distributed network and expertise in security, providing you with the skills and capacity you need to mitigate the risk from even the biggest and most complex of attacks, both at the network and the application layers.
* **Edge Functions**: create and configure security functions, such as *ReCaptcha*, *JWT*, *Web Token* and *Bot Manager Lite* among others, and protect the information that is important to your competitive strategy, such as price and content, from malicious attacks that consume bandwidth, increase traffic and compromise applications, as well as damaging your SEO rankings.

## How it works 

Before you begin, make sure that the **Edge Firewall** service and its modules are active on your Azion account.

To show how it works, we will configure **Edge Firewall** for an e-commerce store (`www.myecommerce.com`) as an example, and demonstrate how we will prevent a particular malicious website from redirecting traffic from our store. For this, we will configure a rule within **Edge Firewall** to block *Header HTTP Referer*.

<Tabs client:visible>
    <Fragment slot="tab.consoleworkloads">Console - Workloads</Fragment>
    <Fragment slot="tab.consoledomain">Console - Domains</Fragment>
    <Fragment slot="tab.apiv4">API v4</Fragment>
    <Fragment slot="tab.apiv3">API v3</Fragment>

<Fragment slot="panel.consoleworkloads">

To configure Edge Firewall via Workloads:

1. Access [Azion Console](/en/documentation/products/guides/how-to-access-azion-console/) > **Workloads**.
2. Select your workload.
3. Navigate to **Security Settings**.
4. In **Edge Firewall**, configure the firewall modules you need:
   - **Network Layer Protection**
   - **Web Application Firewall** 
   - **Edge Functions**
5. Create security rules:
   - **Criteria**: Header Referer matches `http://www.malicioussite.com`
   - **Behavior**: Deny (403 Forbidden)
6. Click **Save**.

:::note
With Workloads, edge firewall rules are automatically applied to protect your workload.
:::

</Fragment>

<Fragment slot="panel.consoledomain">

To configure Edge Firewall via traditional Domains interface:

From **Azion Console**, create a new configuration of **Edge Firewall** or edit an existing one. You'll need to include your domain on the *Main Settings* tab, so that it can be protected by the rule. Save your edge firewall and next add a *New Rule* on the *Rules Engine* tab. Choose a name in the *Rule Engine* and define the activation criteria (Criteria). 

In our example we are going to use the variable *Header Referer*, the operator *matches* and, for the string comparison, a fictitious address for a malicious site (`http://www.malicioussite.com`).

Next, we simply configure a task in *Behavior* for our rule, in this case, we use the option `Deny (403 Forbidden)`. With this, we have established a rule by which every request to our shop that originates from the domain `malicioussite.com` will be blocked and will return the status code `HTTP 403`.

To take advantage of everything that Azion **Edge Firewall** has available, make sure you activate all the modules within **Edge Firewall**, on the *Main Settings* tab, through **Azion Console**.

</Fragment>

<Fragment slot="panel.apiv4">

To configure Edge Firewall via API v4:

<Code lang="bash" code={`curl --request POST \\\\
  --url https://api.azion.com/v4/edge_firewall \\\\
  --header 'Accept: application/json' \\\\
  --header 'Content-Type: application/json' \\\\
  --header 'Authorization: Token [TOKEN VALUE]' \\\\
  --data '{
    "name": "E-commerce Security",
    "domains": ["<domain_id>"],
    "is_active": true,
    "edge_functions_enabled": true,
    "network_protection_enabled": true,
    "waf_enabled": true
  }'`} />

Create a rule to block malicious referers:

<Code lang="bash" code={`curl --request POST \\\\
  --url https://api.azion.com/v4/edge_firewall/<firewall_id>/rules \\\\
  --header 'Accept: application/json' \\\\
  --header 'Content-Type: application/json' \\\\
  --header 'Authorization: Token [TOKEN VALUE]' \\\\
  --data '{
    "name": "Block Malicious Referer",
    "is_active": true,
    "behaviors": [
      {
        "name": "deny"
      }
    ],
    "criteria": [
      [
        {
          "variable": "${http_referer}",
          "operator": "matches",
          "conditional": "if",
          "argument": "http://www.malicioussite.com"
        }
      ]
    ]
  }'`} />

:::tip
Check the [Edge Firewall API v4 documentation](https://api.azion.com/v4#/operations/PostEdgeFirewall) for more details.
:::

</Fragment>

<Fragment slot="panel.apiv3">

To configure Edge Firewall via API v3:

<Code lang="bash" code={`curl --request POST \\\\
  --url https://api.azionapi.net/edge_firewall \\\\
  --header 'Accept: application/json; version=3' \\\\
  --header 'Content-Type: application/json' \\\\
  --header 'Authorization: Token [TOKEN VALUE]' \\\\
  --data '{
    "name": "E-commerce Security",
    "domains": [<domain_id>],
    "is_active": true,
    "edge_functions": true,
    "network_protection": true,
    "waf": true
  }'`} />

Create a rule to block malicious referers:

<Code lang="bash" code={`curl --request POST \\\\
  --url https://api.azionapi.net/edge_firewall/<firewall_id>/rules_engine \\\\
  --header 'Accept: application/json; version=3' \\\\
  --header 'Content-Type: application/json' \\\\
  --header 'Authorization: Token [TOKEN VALUE]' \\\\
  --data '{
    "name": "Block Malicious Referer",
    "is_active": true,
    "behaviors": [
      {
        "name": "deny"
      }
    ],
    "criteria": [
      [
        {
          "variable": "${http_referer}",
          "operator": "matches",
          "conditional": "if",
          "input_value": "http://www.malicioussite.com"
        }
      ]
    ]
  }'`} />

:::tip
Check the [Edge Firewall API v3 documentation](https://api.azionapi.net/api/v3#/Edge%20Firewall) for complete details.
:::

</Fragment>

</Tabs>




