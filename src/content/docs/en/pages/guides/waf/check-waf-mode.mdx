---
title: How to check your WAF mode
description: Learn how to check and change the operation mode of WAF configurations.
meta_tags: 'edge firewall, web application firewall, learning, blocking, operation modes'
namespace: documentation_how_to_configurations_check_WAF_mode
menu_namespace: secureMenu
permalink: /documentation/products/guides/how-to-check-your-waf-mode/
---

import Tabs from '~/components/tabs/Tabs'
import Apiv4Rollout from '~/includes/snippets/apiv4Rollout/en/snippet.mdx'

Azion **Web Application Firewall (WAF)** can operate in two different modes *learning* and *blocking*. When in learning mode, WAF analyzes threats without actually blocking them. When in blocking mode, all requests considered as threats are blocked and don't even reach the server (origin).

The learning mode (or *calibration stage*) helps to improve WAF services and reduce false positives. Blocking mode will provide real-time protection against all supported threat families.

<Apiv4Rollout />

:::tip[API Migration]
If you're migrating from API v3 to API v4, check the [API v4 to API v4 migration guide](/en/documentation/devtools/api-v4/migrate/).
:::

:::tip
Check the list of all [threat families](/en/documentation/products/secure/edge-firewall/web-application-firewall/) that WAF can protect your applications from.
:::

This documentation will guide you on how to create, locate, and edit the operation mode of a WAF Rule Set configuration.

> WAF Rule Set is how a WAF configuration instance is called.

---

## Requirements

The WAF operation mode is set on the **Rules Engine** tab of an **Edge Firewall** configuration. Make sure you have:

- An [edge firewall](/en/documentation/products/guides/secure/edge-firewall-configure-main-settings/) associated with the domains of your edge applications.
- This edge firewall should have at least one [WAF Rule Set](/en/documentation/products/secure/edge-firewall/web-application-firewall/rules-set/). 

If you don't have a configured WAF Rule Set, check [this guide](/en/documentation/products/guides/secure/create-waf-rule-set/) for more details.

---

<Tabs client:visible>
    <Fragment slot="tab.console-workloads">Console (Workloads)</Fragment>
    <Fragment slot="tab.console-domains">Console (Domains)</Fragment>
    <Fragment slot="tab.apiv4">API v4</Fragment>
    <Fragment slot="tab.apiv3">API v3</Fragment>

<Fragment slot="panel.console-workloads">

## How to check and edit WAF operation mode via Console (Workloads)

To check or edit the operation mode of a WAF, follow the steps:

1. Access [Azion Console](/en/documentation/products/guides/how-to-access-azion-console/) > **Edge Firewall**, in the **Secure** section.
2. From the list, find and select the edge firewall running the WAF Rule Set.
3. From the **Main Settings** tab, make sure:
   - All domains from your application are on the **Selected** list.
   - The **Network Layer Protection** and **Web Application Firewall** module switches are enabled.
   - If you've made any changes, click **Save**.
4. Click on the **Rules Engine** tab.
5. Select the rule associated with the WAF Rule Set for which you want to configure the operation mode.

This rule should have similar Criteria/Behavior logic, and the WAF mode will be below the name of the WAF Rule Set:

- Criteria: `If: [Request URI] [starts with] [/]`. <br />
- Behavior: `Then: [Set WAF Rule Set] [<name-of-waf-rule-set>] [Learning/Blocking]`.

6. Click the **Save** button.

</Fragment>

<Fragment slot="panel.console-domains">

## How to check and edit WAF operation mode via Console (Domains)

To check or edit the operation mode of a WAF, follow the steps:

1. Access [Azion Console](/en/documentation/products/guides/how-to-access-azion-console/) > **Edge Firewall**, in the **Secure** section.
2. From the list, find and select the edge firewall running the WAF Rule Set.
3. From the **Main Settings** tab, make sure:
   - All domains from your application are on the **Selected** list.
   - The **Network Layer Protection** and **Web Application Firewall** module switches are enabled.
   - If you've made any changes, click **Save**.
4. Click on the **Rules Engine** tab.
5. Select the rule associated with the WAF Rule Set for which you want to configure the operation mode.

This rule should have similar Criteria/Behavior logic, and the WAF mode will be below the name of the WAF Rule Set:

- Criteria: `If: [Request URI] [starts with] [/]`. <br />
- Behavior: `Then: [Set WAF Rule Set] [<name-of-waf-rule-set>] [Learning/Blocking]`.

6. Click the **Save** button.

</Fragment>

<Fragment slot="panel.apiv4">

## How to check and edit WAF operation mode via API v4

To check or edit the operation mode of a WAF using the API v4, follow the steps:

1. Run the following `GET` request to retrieve your edge firewall, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/):

```bash
curl --location 'https://api.azion.com/v4/edge_firewall/edge_firewalls' \
--header 'Accept: application/json; version=4' \
--header 'Authorization: Token [TOKEN VALUE]'
```

2. You'll receive a response with all your edge firewalls. Copy the `edge_firewall_id` you want to configure.
3. Run a `GET` request to retrieve the rules of your edge firewall:

```bash
curl --location 'https://api.azion.com/v4/edge_firewall/edge_firewalls/{edge_firewall_id}/rules_engine' \
--header 'Accept: application/json; version=4' \
--header 'Authorization: Token [TOKEN VALUE]'
```

4. You'll receive a response with the rules. Find the rule with the WAF Rule Set you want to configure.
5. Run a `PATCH` request to update the rule and change the WAF mode:

```bash
curl --location --request PATCH 'https://api.azion.com/v4/edge_firewall/edge_firewalls/{edge_firewall_id}/rules_engine/{rule_id}' \
--header 'Accept: application/json; version=4' \
--header 'Authorization: Token [TOKEN VALUE]' \
--header 'Content-Type: application/json' \
--data '{
  "behaviors": [
    {
      "name": "set_waf_ruleset",
      "argument": {
        "waf_mode": "learning" // or "blocking"
      }
    }
  ]
}'
```

</Fragment>

<Fragment slot="panel.apiv3">

## How to check and edit WAF operation mode via API v3

To check or edit the operation mode of a WAF using the API v3, follow the steps:

1. Run the following `GET` request to retrieve your edge firewall, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/):

```bash
curl --location 'https://api.azionapi.net/v3/edge_firewall' \
--header 'Accept: application/json; version=3' \
--header 'Authorization: Token [TOKEN VALUE]'
```

2. You'll receive a response with all your edge firewalls. Copy the `id` you want to configure.
3. Run a `GET` request to retrieve the rules of your edge firewall:

```bash
curl --location 'https://api.azionapi.net/v3/edge_firewall/{id}/rules_engine' \
--header 'Accept: application/json; version=3' \
--header 'Authorization: Token [TOKEN VALUE]'
```

4. You'll receive a response with the rules. Find the rule with the WAF Rule Set you want to configure.
5. Run a `PUT` request to update the rule and change the WAF mode:

```bash
curl --location --request PUT 'https://api.azionapi.net/v3/edge_firewall/{id}/rules_engine/{rule_id}' \
--header 'Accept: application/json; version=3' \
--header 'Authorization: Token [TOKEN VALUE]' \
--header 'Content-Type: application/json' \
--data '{
  "behaviors": [
    {
      "name": "set_waf_ruleset",
      "argument": {
        "set_waf_ruleset_argument": "learning" // or "blocking"
      }
    }
  ]
}'
```

</Fragment>

</Tabs>
