---
title: How to generate a Let's Encrypt certificate using the HTTP-01 challenge for your application via API
description: >-
  Discover how you can generate a free TLS certificate issued by Let's Encrypt
  and automatically managed by Azion to secure your edge application via API.
meta_tags: "certificate, ssl, tls, let's encrypt, domain"
namespace: documentation_guides_lets_encrypt_via_api
permalink: /documentation/products/guides/how-to-generate-a-lets-encrypt-certificate-via-api/
---

import Tabs from '~/components/tabs/Tabs'
import Code from '~/components/Code/Code.astro'
import Apiv4Rollout from '~/includes/snippets/apiv4Rollout/en/snippet.mdx'

<Apiv4Rollout />

Web applications that use the HTTPS protocol require a [Digital Certificate](/en/documentation/products/build/edge-application/digital-certificates/). When you redirect your traffic to Azion, you have the option to generate a *Let's Encrypt*â„¢ certificate, which is a free and secure way to encrypt data for your edge application. Azion automates the issuance, renewal, and deactivation of this TLS certificate through an internal certificate management solution.

:::tip
If you're not sure which steps apply to your account, see [this guide](/en/documentation/products/guides/verify-account-migration/) to determine if your account has already been migrated.
:::

## Let's Encrypt HTTP-01 Challenge through API

Azion now offers API-based issuance and renewal of [Let's Encrypt certificates](/en/documentation/products/secure/edge-firewall/digital-certificates/#lets-encrypt-certificate) using the HTTP-01 challenge, providing a streamlined process with no need for DNS TXT records. This offers a straightforward and convenient integration solution, particularly beneficial for customers managing numerous domains and hostnames.

Certificates auto-renew before expiring, removing maintenance windows, and maintaining existing quotas, billing, and permissions. Perfect for ecommerce platforms and hosting providers, this enhancement enables faster onboarding and secures customer sites in minutes without DNS changes.

For more information on these updates, [visit the Digital Certificates documentation](/en/documentation/products/secure/edge-firewall/digital-certificates/#lets-encrypt-certificate).

---

## How to issue a Let's Encrypt certificate

<Tabs client:visible>
<Fragment slot="tab.consoleworkloads">Console - Workloads</Fragment>
<Fragment slot="tab.consoledomain">Console - Domains</Fragment>
<Fragment slot="tab.apiv4">API v4</Fragment>

<Fragment slot="panel.consoleworkloads">

To request a Let's Encrypt certificate via Workloads:

1. Ensure that the DNS for your hostname is pointed to Azion (see [How to point your domain to Azion](/en/documentation/products/guides/point-domain-to-azion/)).

2. Access [Azion Console](https://console.azion.com) > **Digital Certificates**.

3. Click **+ Digital Certificate**.

4. Enter a name for your certificate.

5. In **Import or Request Certificate**, select **Request a Let's Encrypt certificate**.

6. In **Hostname**, enter your domain name (for example, mysite.azion.com).

7. For multiple hostnames, add them in **Alternative Names (SAN)**.

8. Select **HTTP Challenge** as the validation method.

9. Click **Save**.

10. After certificate creation, go to **Workloads** and associate the certificate with your workload in **Protocol Settings** > **Digital Certificate**.

</Fragment>

<Fragment slot="panel.consoledomain">

To request a basic Let's Encrypt certificate via Domains:

1. Ensure that the DNS for your hostname is pointed to Azion (see [How to point your domain to Azion](/en/documentation/products/guides/point-domain-to-azion/)).

2. Access [Azion Console](https://console.azion.com) > **Domains**.

3. Click **+ Domain** or select an existing domain.

4. Fill in the domain configuration:
   - **Name**: Enter a name for your domain
   - **Edge Application**: Select your edge application
   - **CNAMEs**: Add your custom domain (e.g., mysite.azion.com)

5. In **Digital Certificate**, select **Request Let's Encrypt certificate**.

6. Click **Save**.

Azion will automatically generate and manage the Let's Encrypt certificate for the domains specified in the CNAMEs field.

:::note
The Domain interface uses a simplified Let's Encrypt process. For advanced features like HTTP-01 challenge with multiple SANs, use the Workloads interface or API v4.
:::

</Fragment>

<Fragment slot="panel.apiv4">

To issue a Let's Encrypt certificate via HTTP-01 challenge using API v4:

1. Define the hostname to be used in the digital certificate (for example, mysite.azion.com) as `common_name`.

2. Ensure that the DNS for this hostname is pointed to Azion (see [How to point your domain to Azion](/en/documentation/products/guides/point-domain-to-azion/)). This must be done in your DNS provider service.

   - If you need to issue a single certificate with multiple hostnames (alternative names), all hostnames must be directed to Azion; otherwise, the issuance will fail.

3. Once the DNS responds correctly, create or use an existing API Token (see [Get started with Azion API](/en/documentation/products/overview-azion-api/#prerequisites)).

4. Make a call to request a new certificate with the `"http"` challenge:

<Code lang="bash" code={`curl --request POST \\
  --url https://api.azion.com/v4/digital_certificates/certificates/request \\
  --header 'Accept: application/json' \\
  --header 'Authorization: Bearer [TOKEN]' \\
  --header 'Content-Type: application/json' \\
  --data '{
    "name": "My certificate",
    "challenge": "http",
    "authority": "lets_encrypt",
    "common_name": "mysite.azion.com",
    "alternative_names": []
  }'`} />

| Key | Description |
| --- | --- |
| `challenge` | Use `"http"` for HTTP-01 challenge (no DNS changes needed) |
| `authority` | Set to `"lets_encrypt"` |
| `common_name` | Primary domain for the certificate |
| `alternative_names` | Array of additional domains (SANs) |

</Fragment>

</Tabs>

5. The response will be similar to the one below:

```json
{
  "state": "executed",
  "data": {
    "id": 127013,
    "name": "My certificate",
    "certificate": null,
    "issuer": null,
    "subject_name": [
      "mysite.azion.com"
    ],
    "validity": null,
    "status": "Pending",
    "type": "edge_certificate",
    "managed": true,
    "status_detail": "",
    "csr": null,
    "challenge": "http",
    "authority": "lets_encrypt",
    "key_algorithm": "",
    "active": true,
    "product_version": "2.0",
    "last_editor": "{your_user@azion.com}",
    "last_modified": "2025-06-25T21:32:21.016402Z"
  }
}
```

6. If the resulting status is **Pending**, the request was scheduled successfully.

7. The Azion platform will schedule the certificate issuance automatically even if you don't have a workload with the related hostname published and active on Azion.

   a. Azion itself deploys a service that responds to the Let's Encrypt HTTP-01 challenge and completes it as soon as the issuance is finished.

8. Monitor the issuance status by querying the certificate details at the endpoint `https://api.azion.com/v4/digital_certificates/certificates/{id}` replacing `{id}` with the identifier provided in the previous response, such as `"id": 127013`.

   a. In case of failure, an error message will be displayed in the **status_detail** property, such as `"status_detail": "An error has occurred while issuing the requested certificate. Please verify the following domains CNAME: mysite.azion.com"`

9. If the process was successful, the certificate will be issued and the status will be **active**.

10. Now you just need to associate your certificate with the desired workload and adjust the TLS/HTTPS properties as needed.
