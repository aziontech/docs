---
title: Edge SQL API 
description: The Edge Functions SQL API is an interface that allows access to the Azion Edge SQL. Through this interface, it's possible to read and write data in the storage and its buckets.
meta_tags: edge function, edge computing, storage, jamstack, apis
namespace: documentation_runtime_edge_sql
permalink: /documentation/devtools/runtime/api-reference/edge-sql/
menu_namespace: runtimeMenu
---

The Edge SQL API provides an interface for interacting with an [EdgeSQL]() database from Edge Functions running on the Azion Edge Platform. This document outlines the key components of the API and provides code samples for each.

## Database  

Creates a connection to an EdgeSQL Database for your application. Returns a Connection type object.

### Methods

Method    | Description | Signature | Parameters | Return
---       |    :---:    |    :---:  |    :---:  |  :---:
Open      | Opens a connection to the read replica of an EdgeSQL database | `static async open(name)` | `name: <string>` | `<Connection>`

**Code Sample**:

```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');
```

---

## Connection

Represents the communication channel with a specific EdgeSQL Database. This object can be obtained by opening a database.

### Methods

Method   | Description | Signature | Parameters  | Return
---      |    ---    |    ---  |   ---     |  ---
Execute  | Executes an SQL command | `async execute(sql,params)` | `sql: <string> '?'  positional parameter :<param_name> params: [<param>] Array of positional values Dictionary of values` | `-`
Query    | Executes an SQL command | `async query(sql, params)` | `sql: <string> '?'  positional parameter :<param_name> params: [<param>] Array of positional values Dictionary of values` | `<Rows>`
Prepare  | Prepares an SQL command for execution from the combination of the command and parameters | `async prepare(sql,params)` | `sql: <string> '?'  positional parameter :<param_name> params: [<param>] Array of positional values Dictionary of values` | `<Statement>`

**Code Samples**:

```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');

const result = await db.query('SELECT * FROM users WHERE id = ?', [123]);
```

```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');

await db.execute('UPDATE users SET name = ? WHERE id = ?', ['John Doe', 123]);
```

```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');

const statement = await db.prepare('UPDATE users SET name = ? WHERE id = ?', ['John Doe', 123]);
```

---

## Statement

An abstraction of an SQL command, the Statement object allows for the execution of the represented command. It can be created from a `Connection.prepare` command.

### Methods

Method   | Description | Signature | Parameters  | Return
---      |    ---    |    ---  |   ---     |  ---
Execute  | Executes an SQL command | `async execute(sql, params)` | `sql: [<string>] '?'  positional parameter :<param_name> params: [<param>] Array of positional values Dictionary of values` | `-`
Query    | Executes an SQL command | `async query(sql, params)` | `sql: [<string>] '?'  positional parameter :<param_name> params: [<param>] Array of positional values Dictionary of values` | `<Rows>`

### Attributes

Attribute          | Description | Signature | Parameters | Return
---                |    ---    |    ---  |    ---   |  ---
`parameterCount`   | Returns the number of parameters related of statement | `parameterCount()` | `-` | `<int32>`
`parameterName`    | Returns the name of parameter | `parameterName(index)` | `index: <int32>` | `<String>`
`columns`          | Returns the list of columns related of the statement | `columns()` | `-` | `[<Object>]`

**Code Samples**:

```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');

const statement = await db.prepare('UPDATE users SET name = ? WHERE id = ?', ['John Doe', 123]);

await statement.execute();
```

```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');

const statement = await db.prepare('SELECT * FROM users WHERE id = ?', [123]);

const result = await statement.query();
```

---

## Rows

Represents the result set returned by an SQL query.

### Methods

Method  | Description | Signature | Parameters | Return
---     |    :---:    |    :---:  |    :---:   |  :---:
next    | Returns the next line of the query response | `async next()` | `-` | `<Row>` or `null`

### Attributes

Attribute   | Description | Signature | Parameters | Return
---         |    ---    |    ---  |    ---   |  ---
`columnCount` | Returns the number of columns from the query result | `columnCount()` | `-` | `<int32>`
`columnName`  | Returns the column's name | `parameterName(index)` | `index: <int32>` | `<String>`
`columnType`  | Returns the column's type | `columnType(index)` | `index: <int32>` | `<int32>`

**Code Sample**:

```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');

const result = await db.query('SELECT * FROM users');

let row;
while ((row = await result.next()) !== null) {
    console.log(row.getString(0)); // prints the first column of each row
}
```

---

## Row

Represents the set of attributes and values in a row of a result set.

### Attributes

Attribute   | Description | Signature | Parameters | Return
---         |    ---    |    ---  |    ---   |  ---
`columnName` | Returns the column's name | `columnName(index)` |  `index: <int32>`  | `<String>`
`columnType` | Returns the column's type | `ColumnType(index)` |  `index: <int32>`  | `<int32>`
`getValue`   | Returns the attribute value | `getValue(index)` |  `index: <int32>`  | `<Value>*`
`getString`  | Returns the attribute value as string | `getString(index)` |  `index: <int32>`  | `<String>`

**Code Sample**:
    
```javascript
const {Database} = require('azion:sql');

const db = await Database.open('my_database');

const result = await db.query('SELECT * FROM users WHERE id = ?', [123]);

const row = await result.next();

console.log(row.columnName(0)); // prints the name of the first column
console.log(row.columnType(0)); // prints the type of the first column
console.log(row.getValue(0)); // prints the value of the first column
console.log(row.getString(0)); // prints the value of the first column as a string
```

`*Note: <Value> could be a number, bigint, string, or boolean.`

