---
title: How to define a new origin for your application
description: >-
  Create an edge application with Azion by setting up an origin. Your origin can
  be an application, a web server, or storage.
meta_tags: 'origin, server, application, storage, bucket'
namespace: docs_guides_build_work_with_origins
permalink: /documentation/products/guides/build/work-with-origins/
---

import Tabs from '~/components/tabs/Tabs'

import Code from '~/components/Code/Code.astro'
import Apiv4Rollout from '~/includes/snippets/apiv4Rollout/en/snippet.mdx'

<Apiv4Rollout />

This guide explains how to configure an origin. An origin, also known as a backend, is the server from which Azion retrieves your content. Origins can include object storage services, cloud servers, or other infrastructure that hosts your application assets or data.

There are separate instructions for API v3 using [legacy Origin](/en/documentation/products/build/edge-application/domains/) settings and API v4 using the new [Edge Connector](/en/documentation/products/secure/edge-connector) product.

:::tip
In this guide, there are separate instructions for API v3 and API v4. If you're not sure which steps apply to your account, see [the Verify Your Account Migration guide](/en/documentation/products/guides/verify-account-migration/) to determine if your account has already been migrated.:::

---

<Tabs client:visible>
    <Fragment slot="tab.consoleedgeconnector">Console - Edge Connector</Fragment>
    <Fragment slot="tab.consoleorigins">Console - Origins</Fragment>
    <Fragment slot="tab.apiv4">API v4</Fragment>
    <Fragment slot="tab.apiv3">API v3</Fragment>

<Fragment slot="panel.consoleedgeconnector">

1. [Access Azion Console](/en/documentation/products/guides/how-to-access-azion-console/) > **Edge Connector**.
2. Click the **+ Edge Connector** button.
3. In the **General** section, give your connector a unique and descriptive name (`My Edge Storage Connector`).
4. In the **Connector Type** section, select **HTTP**.

:::tip
To implement the load balancing algorithm for multiple origins, see the [guide on multiple origins with Load Balancer](/en/documentation/products/guides/build/multiple-origins/).
:::

5. In the **Connection Options** section, locate the **Transport Protocol Policy** field and select **Force HTTPS**.
6. In the **Address Management** section, locate the **Address** field and add `httpbin.org`.
7. Under **Host**, add `customhost.com`.
8. Click the **Save** button.

:::note
If your origin is under a host followed by a path, such as `https://bucket.s3.amazonaws.com/applications/your-app`, you must separate the URL and add the host `bucket.s3.amazonaws.com` into the **Address** field. Then add the path `/applications/your-app` into the **Origin path** field.
:::

To activate the Edge Connector in your edge application:

1. Access the **Rules Engine** tab.
2. Edit the default rule or add a new request rule.
3. Give a name for your rule.
4. Select **Request Phase**.
5. Under the **Criteria** section, select the variable `${uri}`.
6. As a comparison operator, select **is equal**.
7. As an argument, add `/httpbin`.
8. In the **Behaviors** section, select **Set Edge Connector** from the behavior list.
9. Select the new Edge Connector you created.
10. Click the **Save** button.
11. Wait a few minutes for the changes to propagate and access `xxxxxxxxxx.map.azionedge.net/httpbin`. 

</Fragment>

<Fragment slot="panel.consoleorigins">

When you [create an edge application](/en/documentation/products/start-with-a-template/), a default origin is created and activated automatically. This guide will show you how to create and activate a new origin with different configurations without removing or editing the default origin.

1. Access [Azion Console](/en/documentation/products/guides/how-to-access-azion-console/) > **Edge Application**.
2. Click the edge application for which you want to configure a new origin.
3. Select the **Origins** tab.
4. Click the **+ Origin** button.
5. Give your new origin a name. For example: `httpbin.org`
6. Under **Type**, keep the option **Single Origin** selected.

:::tip
To implement load balancing algorithm for multiple origins, see the [guide on multiple origins with Load Balancer](/en/documentation/products/guides/build/multiple-origins/).
:::

7. Under **Protocol Policy**, select **Enforce HTTPS**.
8. Under **Address**, add `httpbin.org`
9. Under **Host Header**, add `customhost.com`.
10. Leave **Path** blank.
11. Click the **Save** button.

:::note
If your origin is under a host followed by a path, such as `https://bucket.s3.amazonaws.com/applications/your-app`, you must separate the URL and add the host `bucket.s3.amazonaws.com` into the **Address** field and add the path `/applications/your-app` into the **Origin path** field.
:::

You've created a new origin, but it isn't active in your application yet. You need to define what will trigger a request to the new origin. 

1. Navigate to the **Rules Engine** tab.
2. Click the **+ Rule** button.
3. Give a name for your rule.
4. Select **Request Phase**.
5. Under the **Criteria** section, select the variable `${uri}`.

:::note
The `${uri}` variable may already be selected by default if you didn't activate **Application Accelerator**. For more information on Edge Application modules, see the [Edge Application documentation](/en/documentation/products/build/edge-application/#modules).
:::

6. As a comparison operator, select **is equal**.
7. As an argument, add `/httpbin`.
8. In the **Behaviors** section, select **Set Origin** from the behavior list.
9. Select the new origin you created.
10. Click the **Save** button.
11. Wait a few minutes for the changes to propagate and access `xxxxxxxxxx.map.azionedge.net/httpbin`. 
</Fragment>

<Fragment slot="panel.apiv4">

1. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/) and the `<edge_application_id>` variable with [your edge application ID](/en/documentation/products/guides/build/configure-main-settings/):

<Code lang="bash" code={` 
curl --request POST \
  --url https://api.azion.com/v4/edge_connector/connectors \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
    "name": "httpbin.org SO HTTPS Host:customhost.com",
    "active": true,
    "type": "http",
    "attributes": {
      "addresses": [
        {
          "active": true,
          "address": "httpbin.org",
          "http_port": 80,
          "https_port": 443
        }
      ],
      "connection_options": {
        "dns_resolution": "preserve",
        "transport_policy": "force_https",
        "http_version_policy": "http1_1",
        "host": "customhost.com",
        "path_prefix": "",
        "following_redirect": false,
        "real_ip_header": "X-Real-IP",
        "real_port_header": "X-Real-PORT"
      },
      "modules": {
        "load_balancer": {
          "enabled": false,
          "config": {
            "method": "round_robin",
            "max_retries": 0,
            "connection_timeout": 60,
            "read_write_timeout": 120
          }
        },
        "origin_shield": {
          "enabled": false,
          "config": null
        }
      }
    }
  }'

`} />


  | Key | Description |
  | --- | --- |
  | `name` | Sets the string in value as a name of the origin. |
  | `type` | Sets the new edge connector type to `http`. For more information on load balancing, check [Work with multiple origins](/en/documentation/products/guides/build/multiple-origins/). |
  | `addresses` | Takes a list of objects for each address of the origin. Since this is an entry of the single origin type, you may only send one object with the `address` value in the array. |
  | `transport_policy` | When `https`, enforces an HTTPS connection with the origin, not affecting the protocol from user requests. |
  | `host` | Sets the string in value as the value of the `Host` header sent to the origin. |

2. You'll receive a response similar to this:

<Code lang="json" code={`{

{
  "state": "pending",
  "data": {
    "id": <edge_connector_id>,
    "name": "httpbin.org SO HTTPS Host:customhost.com",
    "last_editor": "education@azion.com",
    "last_modified": "2025-08-14T18:12:20.161667Z",
    "active": true,
    "product_version": "1.0",
    "type": "http",
    "attributes": {
      "addresses": [
        {
          "active": true,
          "address": "httpbin.org",
          "http_port": 80,
          "https_port": 443,
          "modules": null
        }
      ],
      "connection_options": {
        "dns_resolution": "preserve",
        "transport_policy": "force_https",
        "http_version_policy": "http1_1",
        "host": "customhost.com",
        "path_prefix": "",
        "following_redirect": false,
        "real_ip_header": "X-Real-IP",
        "real_port_header": "X-Real-PORT"
      },
      "modules": {
        "load_balancer": {
          "enabled": false,
          "config": null
        },
        "origin_shield": {
          "enabled": false,
          "config": null
        }
      }
    }
  }
}
`} />


3. Run the following `POST` request in your terminal to bind the new Edge Connector to your Edge Application replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/), the `<edge_application_id>` variable with [your edge application ID](/en/documentation/products/guides/build/configure-main-settings/), and the `<edge_connector_id>` variable with the Edge Conector ID from the previous step:


<Code lang="bash" code={` 
curl --request POST \
  --url https://api.azion.com/v4/edge_application/applications/<edge_application_id>/request_rules \
  --header 'Accept: application/json' \
  --header 'Authorization: Token [TOKEN VALUE]' \
  --header 'Content-Type: application/json' \
  --data '{
  "name": "string",
  "active": true,
  "criteria":
    [
      {
        "conditional": "if",
        "variable": "\${uri}",
        "operator": "is_equal",
        "argument": "/httpbin"
      }
    ]
  ],
  "behaviors": [
    {
      "type": "set_edge_connector",
      "attributes": {
        "value": "<edge_connector_id>"
      }
    }
  ]
}'
`} />

3. You'll receive a response confirming that the rule was created.
4. Wait a few minutes for the changes to propagate and access `xxxxxxxxxx.map.azionedge.net/httpbin`. Also, try accessing any other unconfigured URI and you should receive a `404` error.

</Fragment>

<Fragment slot="panel.apiv3">

1. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/) and the `<edge_application_id>` variable with [your edge application ID](/en/documentation/products/guides/build/configure-main-settings/):

<Code lang="bash" code={`
curl --location 'https://api.azionapi.net/edge_applications/<edge_application_id>/origins' \
--header 'Accept: application/json; version=3' \
--header 'Content-Type: application/json' \
--header 'Authorization: Token [TOKEN VALUE]' \
--data '{
        "name": "httpbin.org SO HTTPS Host:customhost.com",
        "origin_type": "single_origin",
        "addresses": [
            {
                "address": "httpbin.org"
            }
        ],
        "origin_protocol_policy": "https",
        "host_header": "customhost.com"
}'
`} />

  | Key | Description |
  | --- | --- |
  | `name` | Sets the string in value as a name of the origin. |
  | `origin_type` | Sets the new origin type to `single_origin`. For more information on load balancing, check [Work with multiple origins](/en/documentation/products/guides/build/multiple-origins/). |
  | `addresses` | Takes a list of objects for each address of the origin. Since this is an entry of the single origin type, you may only send one object with the `address` value in the array. |
  | `origin_protocol_policy` | When `https`, enforces an HTTPS connection with the origin, not affecting the protocol from user requests. |
  | `host_header` | Sets the string in value as the value of the `Host` header sent to the origin. |

2. You'll receive a response similar to this:

<Code lang="json" code={`{
    "results": {
        "origin_id": <origin_id>,
        "origin_key": <origin_key>,
        "name": "httpbin.org SO HTTPS Host:customhost.com",
        "origin_type": "single_origin",
        "addresses": [
            {
                "address": "httpbin.org",
                "weight": null,
                "server_role": "primary",
                "is_active": true
            }
        ],
        "origin_protocol_policy": "https",
        "is_origin_redirection_enabled": false,
        "host_header": "customhost.com",
        "method": "",
        "origin_path": "",
        "connection_timeout": 60,
        "timeout_between_bytes": 120,
        "hmac_authentication": false,
        "hmac_region_name": "",
        "hmac_access_key": "",
        "hmac_secret_key": ""
    }
}
`} />

:::caution[warning]
Endpoints that require origin identification use the `origin_key` value. For example, a `PATCH` request for an origin must be made to the URL `https://api.azionapi.net/edge_applications/<edge_application_id>/origins/<origin_key>`. This doesn't apply to cases when you must reference an origin outside the `/origins/` endpoints, such as when creating a new rule to activate your origin.
:::

3. Run the following `POST` request in your terminal, replacing `[TOKEN VALUE]` with your [personal token](/en/documentation/products/guides/personal-tokens/), the `<edge_application_id>` variable with [your edge application ID](/en/documentation/products/guides/build/configure-main-settings/), and the `<origin_id>` variable with the origin ID from when you [created a new origin via API](#via-api):

<Code lang="bash" code={`
curl --location 'https://api.azionapi.net/edge_applications/<edge_application_id>/rules_engine/request/rules' \
--header 'Accept: application/json; version=3' \
--header 'Content-Type: application/json' \
--header 'Authorization: Token [TOKEN VALUE]' \
--data '{
    "name": "Set httpbin /httpbin",
    "behaviors": [
        {
            "name": "set_origin",
            "target": "<origin_id>"
        }
    ],
    "criteria": [
        [
            {
                "variable": "\${uri}",
                "operator": "is_equal",
                "conditional": "if",
                "input_value": "/httpbin"
            }
        ]
    ]
}'
`} />

4. You'll receive a response confirming that the rule was created.
5. Wait a few minutes for the changes to propagate and access `xxxxxxxxxx.map.azionedge.net/httpbin`. Also, try accessing any other unconfigured URI: you should receive a `404` error.

:::tip
Check the [Azion API documentation](https://api.azion.com/) to know more about all features available via API.
:::
</Fragment>

</Tabs>