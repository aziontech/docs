---
title: Como configurar uma WAF Custom Allowed Rule
description: A configuração de uma WAF Custom Allowed Rule permite criar regras específicas para as necessidades da sua edge application.
meta_tags: secure, WAF, WEB Application Firewall, cybersegurança, ameaças
namespace: docs_guides_configure_waf_allowed_rules
permalink: /documentacao/produtos/guias/secure/configurar-waf-allowed-rules/
---

import Tabs from '~/components/tabs/Tabs'
import Button from '~/components/Button.astro'

:::caution[importante]
A Azion possui duas interfaces de usuário: Real-Time Manager e Console, que está em estágio de *Preview*. Atualmente, o Console está disponível apenas para planos de Developer e novas contas. Siga os passos de acordo com a interface de usuário que estiver utilizando.
:::

Configurar uma **WAF Custom Allowed Rule** permite criar regras específicas para as necessidades da sua edge application. Essas regras permitem tráfego legítimo específico enquanto mantêm uma proteção robusta contra ataques maliciosos.

Este guia explica como configurar uma WAF Custom Allowed Rule através da Plataforma de Edge da Azion.

<Button href="/pt-br/documentacao/produtos/secure/edge-firewall/web-application-firewall/custom-allowed-rules/" text="saiba mais sobre as WAF Custom Allowed Rules" variant="secondary"></Button>

---

## Pré-requisitos

Para instanciar WAF Custom Allowed Rules em um WAF Rule Set, você deve ter:

- Um [edge firewall](/pt-br/documentacao/produtos/guias/secure/edge-firewall-definir-main-settings/) com o módulo **Web Application Firewall** ativado.
- Um [WAF Rule Set](/pt-br/documentacao/produtos/guias/secure/criar-waf-rule-set/) configurado.

---

## Configure uma WAF Custom Allowed Rule

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Acesse o [Azion Console](/pt-br/documentacao/produtos/guias/como-acessar-o-azion-console/) > **WAF Rules** em **Edge Libraries**.
2. Crie um [novo WAF Rule Set](/pt-br/documentacao/produtos/secure/edge-firewall/web-application-firewall/rule-sets/) ou selecione um existente.
3. Selecione a aba **Allowed Rules**.
4. Clique no botão **+ Allowed Rule**. 
5. Selecione o **Rule ID** que deseja usar.
- Verifique a lista de todas as [regras internas disponíveis](/pt-br/documentacao/produtos/secure/edge-firewall/web-application-firewall/custom-allowed-rules/).
6. Digite uma descrição para explicar o motivo pelo qual essa regra foi permitida.
7. Na seção **Match Zone Set**, configure o comportamento que deve ser usado para permitir uma regra:
- Em **Path**, configure o comportamento que deve ser usado para permitir uma regra. Exemplo: `/api/v1/resources/*`.
- Em **Match Zones**, selecione a parte da requisição para corresponder, como cabeçalhos, corpo, etc.
    - De acordo com a opção, você pode preencher campos adicionais para adicionar um valor específico representando a opção de correspondência e as correspondências para o valor ou o nome da chave. Leia mais sobre os [campos das Allowed Rules](/pt-br/documentacao/produtos/secure/edge-firewall/web-application-firewall/#allowed-rules).
- Se necessário, ative o switch **Regex** para tratar campos condicionais como expressões regulares em todas as Match Zones. 
8. Habilite o switch **Status**.
9. Clique no botão **Save**.
</Fragment>

<Fragment slot="panel.rtm">
1. Acesse o [Real-Time Manager (RTM)](https://manager.azion.com/).
2. Abre o **Products menu*** > **WAF Rules** em **Edge Libraries**.
3. Crie um [novo WAF Rule Set](/pt-br/documentacao/produtos/secure/edge-firewall/web-application-firewall/rule-sets/) ou selecione um existente.
4. Selecione a aba **Allowed Rules**.
5. Clique no botão **Add Rule**. 
6. Selecione o **Rule ID** que deseja usar.
- Verifique a lista de todas as [regras internas disponíveis](/pt-br/documentacao/produtos/secure/edge-firewall/web-application-firewall/rule-sets/).
7. Em **Reason**, digite uma descrição para explicar o motivo pelo qual essa regra foi permitida.
8. Na seção **Match Zone Set**, configure o comportamento que deve ser usado para permitir uma regra:
- Em **Path**, configure o comportamento que deve ser usado para permitir uma regra. Exemplo: `/api/v1/resources/*`.
- Em **Match Zones**, selecione a parte da requisição para corresponder, como cabeçalhos, corpo, etc.
    - De acordo com a opção, você pode preencher campos adicionais para adicionar um valor específico representando a opção de correspondência e as correspondências para o valor ou o nome da chave. Leia mais sobre os [campos das Allowed Rules](/pt-br/documentacao/produtos/secure/edge-firewall/web-application-firewall/#allowed-rules).
- Se necessário, ative o switch **Regex** para tratar campos condicionais como expressões regulares em todas as Match Zones. 
9. Habilite o switch **Active**.
10. Clique no botão **Save**.
</Fragment>

</Tabs>

:::tip
Você pode configurar uma Custom Allowed Rule com base nos registros de WAF Tuning. Consulte o guia sobre [Como fazer o tuning do WAF](/pt-br/documentacao/produtos/guias/secure/tune-waf/) para mais informações.
:::

---

import ContributorList from '~/components/ContributorList.astro'

**Contribuidores** <ContributorList>Contributor</ContributorList>