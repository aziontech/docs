---
title: Como associar domínios no Data Stream
description: >-
  Ao associar domínios no Data Stream, os eventos relacionados aos domínios
  especificados serão coletados e enviados para o endpoint.
meta_tags: 'Data Stream, domains, observe, observability, stream, logs'
namespace: documentation_dts_associate_domains
permalink: /documentacao/produtos/guias/data-stream-associar-dominios/
---

import Tabs from '~/components/tabs/Tabs'
import Code from '~/components/Code/Code.astro'
import Apiv4Rollout from '~/includes/snippets/apiv4Rollout/pt/snippet.mdx'

<Apiv4Rollout />

[Data Stream](/pt-br/documentacao/produtos/observe/data-stream/) é um produto de **Observe** que permite que você alimente suas plataformas de SIEM, big data e processamento de stream com os logs dos eventos de suas aplicações na Azion em tempo real.

Quando você associa domínios ao Data Stream, os eventos relacionados aos domínios especificados são coletados e enviados para o endpoint que você configura através de um stream. Você pode associar um ou mais dos seus domínios registrados na Azion a um stream.

:::tip
Se não tiver certeza de quais passos se aplicam à sua conta, consulte [este guia](/pt-br/documentacao/produtos/guias/verificar-migracao-conta/) para determinar se sua conta já foi migrada.
:::

---

## Criando um Data Stream com associação de domínios

<Tabs client:visible>
<Fragment slot="tab.consoleworkloads">Console - Workloads</Fragment>
<Fragment slot="tab.consoledomain">Console - Domains</Fragment>
<Fragment slot="tab.apiv4">API v4</Fragment>
<Fragment slot="tab.apiv3">API v3</Fragment>

<Fragment slot="panel.consoleworkloads">

Para criar um Data Stream e associar workloads:

1. Acesse o [Azion Console](https://console.azion.com).
2. No canto superior esquerdo, selecione **Data Stream** na seção **Observe**.
3. Clique em **+ Stream**.
4. Escolha um nome para seu stream.
5. Na lista suspensa **Source**, selecione a que deseja usar.
6. Na lista suspensa **Template**, selecione a que deseja usar.
7. Em **Workloads** > **Option**, selecione entre **All Current and Future Workloads** ou **Filter Workloads**.

**Se você selecionou Filter Workloads:**

Na caixa **Available Workloads**, você pode:
- Digitar caracteres ou palavras para encontrar workloads ou navegar pela lista dos seus workloads.
- Selecionar cada workload que deseja associar a este stream e clicar no botão `>`.
- Selecionar múltiplos workloads usando `ctrl` no Windows e Linux ou `command` no Mac e clicar no botão `>`.
- Selecionar `>>` para selecionar todos os workloads apresentados na lista.

Após clicar no botão `>`, os workloads selecionados são movidos para a caixa **Chosen Workloads**. Você também pode usar o botão `<` para remover workloads específicos já escolhidos ou selecionar `<<` para remover todos os workloads.

**Se você selecionou All Workloads:**

A Azion seleciona automaticamente todos os workloads *atuais* e *futuros* associados à sua conta do Azion Console usando este stream.

8. Preencha os [campos obrigatórios restantes para configurar seu stream](/pt-br/documentacao/produtos/guias/como-usar-data-stream/).
9. Certifique-se de que o switch **Active** esteja ativo.
10. Clique em **Save**.

</Fragment>

<Fragment slot="panel.consoledomain">

Para criar um Data Stream e associar domínios:

1. Acesse o [Azion Console](https://console.azion.com).
2. No canto superior esquerdo, selecione **Data Stream** na seção **Observe**.
3. Clique em **+ Stream**.
4. Escolha um nome para seu stream.
5. Na lista suspensa **Source**, selecione a que deseja usar.
6. Na lista suspensa **Template**, selecione a que deseja usar.
7. Em **Domains** > **Option**, selecione entre **All Current and Future Domains** ou **Filter Domains**.

**Se você selecionou Filter Domains:**

Na caixa **Available Domains**, você pode:
- Digitar caracteres ou palavras para encontrar domínios ou navegar pela lista dos seus domínios.
- Selecionar cada domínio que deseja associar a este stream e clicar no botão `>`.
- Selecionar múltiplos domínios usando `ctrl` no Windows e Linux ou `command` no Mac e clicar no botão `>`.
- Selecionar `>>` para selecionar todos os domínios apresentados na lista.

Após clicar no botão `>`, os domínios selecionados são movidos para a caixa **Chosen Domains**. Você também pode usar o botão `<` para remover domínios específicos já escolhidos ou selecionar `<<` para remover todos os domínios.

**Se você selecionou All Domains:**

A Azion seleciona automaticamente todos os domínios *atuais* e *futuros* associados à sua conta do Azion Console usando este stream.

8. Preencha os [campos obrigatórios restantes para configurar seu stream](/pt-br/documentacao/produtos/guias/como-usar-data-stream/).
9. Certifique-se de que o switch **Active** esteja ativo.
10. Clique em **Save**.

</Fragment>

<Fragment slot="panel.apiv4">

Para criar um Data Stream com associação de workload via API v4:

1. Primeiro, liste os workloads disponíveis para obter seus IDs:

<Code lang="bash" code={`curl --request GET \\
  --url https://api.azion.com/v4/workspace/workloads \\
  --header 'Accept: application/json' \\
  --header 'Authorization: Token [TOKEN VALUE]'`} />

2. Crie um Data Stream com associação de workload:

<Code lang="bash" code={`curl --request POST \\
  --url https://api.azion.com/v4/data_stream/streams \\
  --header 'Accept: application/json' \\
  --header 'Authorization: Token [TOKEN VALUE]' \\
  --header 'Content-Type: application/json' \\
  --data '{
    "name": "Meu Stream de Workload",
    "template_id": 2,
    "data_source": "http",
    "active": true,
    "endpoint": {
      "endpoint_type": "standard",
      "url": "https://example.com/endpoint",
      "log_line_separator": "\\n",
      "payload_format": "$dataset",
      "max_size": 1000024
    },
    "workload_ids": [<workload_id_1>, <workload_id_2>],
    "all_workloads": false
  }'`} />

| Chave | Descrição |
| --- | --- |
| `workload_ids` | Array de IDs de workload para associar com o stream |
| `all_workloads` | Defina como `true` para associar todos os workloads atuais e futuros |

:::tip
Consulte a [documentação da API Data Stream](https://api.azion.com/v4#/operations/GetDataStreamStreams) para mais detalhes.
:::

</Fragment>

<Fragment slot="panel.apiv3">

Para criar um Data Stream com associação de domínio via API v3:

1. Primeiro, liste os domínios disponíveis para obter seus IDs:

<Code lang="bash" code={`curl --request GET \\
  --url https://api.azionapi.net/data_streaming/domains \\
  --header 'Accept: application/json; version=3' \\
  --header 'Authorization: Token [TOKEN VALUE]'`} />

2. Crie um Data Stream com associação de domínio:

<Code lang="bash" code={`curl --request POST \\
  --url https://api.azionapi.net/data_streaming/streamings \\
  --header 'Accept: application/json; version=3' \\
  --header 'Authorization: Token [TOKEN VALUE]' \\
  --header 'Content-Type: application/json' \\
  --data '{
    "name": "Meu Stream de Domínio",
    "template_id": 2,
    "data_source": "http",
    "active": true,
    "endpoint": {
      "endpoint_type": "standard",
      "url": "https://example.com/endpoint",
      "log_line_separator": "\\n",
      "payload_format": "$dataset",
      "max_size": 1000024
    },
    "domain_ids": [<domain_id_1>, <domain_id_2>],
    "all_domains": false
  }'`} />

| Chave | Descrição |
| --- | --- |
| `domain_ids` | Array de IDs de domínio para associar com o stream |
| `all_domains` | Defina como `true` para associar todos os domínios atuais e futuros |

:::tip
Consulte a [documentação da API Data Stream](https://api.azionapi.net/api/v3#/Data%20Stream) para mais detalhes.
:::

</Fragment>

</Tabs>

Agora, os eventos associados com os domínios ou workloads que você selecionou serão coletados e enviados para o endpoint através do stream configurado.

Assista um tutorial sobre como associar domínios no Data Stream no canal do YouTube da Azion, com opção de ativar legendas em português:

<iframe
   src="https://www.youtube.com/embed/soyIbJW0VdQ"
   loading="lazy"
   width="600"
   height="400"
   title="How to associate domains on Data Stream"
   frameborder="0"
   allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
   allowfullscreen></iframe>

---







