---
title: Como adicionar o Bot Manager em um edge firewall existente usando um template
description: Este template fornece uma maneira fácil de integrar a função Bot Manager em um edge firewall existente na Azion.
meta_tags: templates, guides, Azion Marketplace, security, edge firewall
namespace: docs_guides_templates_bot_manager_integration_kit
permalink: /documentacao/produtos/guias/bot-manager-integration-kit/
---

import Badge from '~/components/Badge.astro';

<Badge variant="accent">
Preview
</Badge>

O template **Bot Manager Integration Kit** fornece uma maneira fácil de integrar a função Bot Manager em um edge firewall existente na Azion. Este template cria automaticamene uma nova instância para a função do Bot Manager e uma regra do Rules Engine para executá-la no edge firewall selecionado.

---

## Pré-requisitos

Antes de implantar esse template, você precisa:

- Ter um [edge firewall](/pt-br/documentacao/produtos/secure/edge-firewall/) criada em sua conta.
    - Durante a configuração do template, você deve informar o ID do seu edge firewall existente para adicionar a instância do Bot Manager. Se o ID não existir, a execução falhará. Verifique [como configurar e editar um edge firewall](/pt-br/documentacao/produtos/secure/proteja-aplicacao/#passo-1-defina-as-configuracoes-principais).
- Ter o módulo **Edge Functions** ativo na sua conta.
    - Para fazer isso, vá na seção [Billing & Subscriptions](https://manager.azion.com/billing-subscriptions/subscriptions?active_tab=subscriptions) e ative o switch do módulo.
    - Se este módulo não estiver ativado, a execução falhará e um log explicando o motivo será mostrado.
    - Se este módulo estiver ativado, a execução deste template poderá gerar custos relacionados ao uso. Consulte a [página de preços](https://www.azion.com/pt-br/precos/) para obter mais informações.
- Instalar a versão mais recente do **Bot Manager**.
    - Vá no [Marketplace da Azion](https://console.azion.com/marketplace) e clique no botão **Install**. Consulte o guia sobre [Como instalar o Azion Bot Manager](/pt-br/documentacao/produtos/guias/bot-manager/) para mais detalhes.
    - Se você não instalou a função Bot Manager antes de tentar usar este template, a execução falhará e um log explicando o motivo será mostrado.

---

## Obtenha o template

Para obter este template, acesse o [Azion Console](https://console.azion.com/) e clique no botão **+ Create** na página inicial.

Isso abrirá um modal onde você pode selecionar **Templates** > **Bot Manager Integration Kit**.

---

## Configure o template

Na página do template, clique na aba **Settings** para abrir o formulário de configuração e fornecer as informações para configurar sua aplicação.

Os campos identificados com asterisco são obrigatórios.

- **Edge Firewall ID** *: o ID do seu edge firewall existente para adicionar a instância do Bot Manager.
    - Para obter o ID, você pode acessar a [página do Edge Firewall](https://console.azion.com/edge-firewall), selecionar aquele que deseja usar e copiar o ID na URL. Você também pode obtê-lo por meio da [API Azion](https://api.azion.com/#f65afb4f-9d02-443b-87b3-a22b960481d2).
    - Este campo é obrigatório.

Depois de preencher todas as informações, clique no botão **Next**, localizado no canto inferior direito. Isso iniciará o processo de deployment.

---

## Implante o template

Durante a implantação, você poderá acompanhar o processo através de uma janela mostrando os logs. Quando estiver concluída, uma nova página será exibida, confirmando que a edge application foi criada com sucesso.

:::note
Caso não cumpra algum dos requisitos, a execução falhará e será mostrado um log explicando o motivo.
:::

Esta página mostra informações sobre a aplicação e alguns opções para continuar sua jornada.

:::note
O link para sua edge application permite que você veja como ela fica no navegador. No entanto, leva um certo tempo para propagar e configurá-la nas edge locations da Azion. Pode ser necessário aguardar alguns minutos para que a URL seja ativada e para que a página da aplicação seja efetivamente exibida no navegador.
:::

Agora você pode [gerenciar seu template](#gerencie-o-template) através do Azion Console.

### Principais configurações

O template verifica se a conta atende aos requisitos (se a versão mais recente do Bot Manager está instalada, se o edge firewall existente informado existe e o módulo Edge Functions está habilitado) para criar uma instância de função do Bot Manager e criar um Rules Engine regra para executar a instância da função.

Caso não cumpra algum dos requisitos, a execução falhará e será mostrado um log explicando o motivo.

A instância da função possui os seguintes JSON Args:

```json
{
  "threshold": 10,
  "action": "allow",
  "internal_logs": 2
}
```

Onde:

- `threshold`: a pontuação máxima que a requisição pode atingir antes que a função execute uma ação. Se não tiver valor, a função não executará ação nenhuma. *Valor padrão: 10*.
- `action`: a ação a ser tomada pela função sempre que a pontuação da requisição for maior ou igual ao limite definido. Valores possíveis: allow, custom_html, deny, drop, hold_connection, random_delay e redirect. *Valor padrão: allow*.
- `internal_logs`: toda execução do Bot Manager grava logs de relatório, independentemente da pontuação da requisição.

Você pode calibrar e editar os argumentos para ajustar melhor a integração às suas necessidades. Leia mais sobre [Como gerenciar bots](/pt-br/documentacao/produtos/guias/secure/gerenciar-bots/).

---

## Consulte os logs

Após a execução do template, as requisições gerarão logs que podem ser vistos no [Real-Time Events](/pt/documentation/products/observe/real-time-events/). Ao analisar os logs gerados pelo Bot Manager, você pode obter insights para entender se alguma alteração nos JSON Args da instância da função é necessária.

Leia mais sobre [Como usar Real-Time Events para observar e calibrar regras](/pt-br/documentacao/produtos/guias/secure/gerenciar-bots/#usar-real-time-events-para-observar-e-calibrar-regras).

Você também pode usar [Data Stream](/pt-br/documentacao/produtos/observe/data-stream/) para monitorar a atividade.

---

## Gerencie o template

Todas as configurações podem ser customizadas a qualquer momento que você precisar através do Azion Console. Para gerenciar e editar as configurações da sua aplicação, proceda da seguinte forma:

1. [Acesse o Azion Console](https://console.azion.com/) > **Edge Application**.
- Você será redirecionado para a página de **Edge Application**. Ela lista todas as edge applications que você criou.
2. Selecione a edge application relacionada com o template.
- A lista é organizada em ordem alfabética. Você também pode usar a **barra de busca** localizada no canto superior esquerdo da lista; atualmente, ela é filtrada apenas pelo **Application Name**, ou nome da edge application.

Depois de selecionar a aplicação em que você trabalhará, você será direcionado para uma página que contém todas as configurações que você pode ajustar.

:::tip
Leia a documentação sobre o [gerenciamento de edge applications](/pt-br/documentacao/produtos/edge-application/primeiros-passos/) para obter mais detalhes.
:::

### Adicione um domínio personalizado

A edge application criada tem um domínio Azion atribuído para torná-la acessível através do navegador. O domínio tem o seguinte formato: `xxxxxxxxxx.map.azionedge.net`. No entanto, você pode adicionar um domínio personalizado para que os usuários acessem sua aplicação por meio dele.

import Button from '~/components/Button.astro';

<Button href="/pt-br/documentacao/produtos/edge-application/domains/" text="saiba mais sobre domínios" variant="secondary">

</Button>

---

import ContributorList from '~/components/ContributorList.astro'

**Contribuidores** <ContributorList>Contributor</ContributorList>
