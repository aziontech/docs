---
title: Como utilizar a integração Fauna através do Marketplace da Azion
description: >-
  Fauna é um banco de dados transacional flexível, amigável e que vem como uma
  API segura e escalável com suporte nativo à GraphQL.
meta_tags: 'edge computing, fauna, database, banco de dados, fauna, graphql'
namespace: docs_use_case_fauna
permalink: /documentacao/produtos/guias/fauna/
---

import Tabs from '~/components/tabs/Tabs'

:::caution[importante]
A Azion possui duas interfaces de usuário: Real-Time Manager e Console, que está em estágio de *Preview*. Atualmente, o Console está disponível apenas para planos de Developer e novas contas. Siga os passos de acordo com a interface de usuário que estiver utilizando.
:::

Fauna é um banco de dados transacional flexível, amigável que conta com uma API segura e escalável, com suporte nativo à GraphQL. Ele se integra perfeitamente ao ecossistema *serverless*.

---

## Pré-requisitos

Para usar a integração da Fauna, você precisa:

1. Criar uma [conta na Fauna](https://dashboard.fauna.com/accounts/register).
2. Gerar uma chave de API na Fauna.
    - Para fazer isso, acesse seu dashboard na Fauna e selecione **Security** na barra lateral. Clique no botão **New Key**, nomeie sua chave e clique no botão **Save**.
    - Anote sua chave de API, pois não será possível recuperá-la posteriormente. Se você a perder, terá que revogá-la e criar uma nova.
3. Uma edge application existente na Azion.

:::tip
Para criar uma nova edge application, acesse a [seção Build](/pt-br/documentacao/produtos/guias/build/criar-uma-aplicacao/) para obter mais detalhes sobre este tópico.
:::

---

## Obtenha a integração

Para obter a integração, siga estes passos:

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Acesse o [Azion Console](/pt-br/documentacao/produtos/guias/como-acessar-o-azion-console/) > **Marketplace**.
2. Na homepage do Marketplace, selecione o card da integração.
3. Quando a página da integração abrir, clique no botão **Install**, localizado no canto inferior da direita.

Aparecerá uma mensagem indicando que a integração foi instalada com sucesso.
</Fragment>

<Fragment slot="panel.rtm">
1. Acesse o [Real-Time Manager (RTM)](https://manager.azion.com/) > **Marketplace**.
2. Na homepage do Marketplace, selecione o card da integração.
3. Quando a página da integração abrir, clique no botão **Get It Now**, localizado no canto inferior da direita.

Aparecerá uma mensagem indicando que a integração foi instalada com sucesso.
</Fragment>

</Tabs>

:::tip
Você pode procurar qualquer integração navegando pelos cards, usando os filtros ou digitando uma palavra-chave na barra de busca.
:::

---

## Configure a integração

Para configurar a integração da Fauna, siga os passos:

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. No canto superior esquerdo da página, selecione **Products menu** > **Edge Application** na seção de **BUILD**.
2. Na lista de edge applications, selecione aquela na qual deseja configurar a integração Fauna.
3. Na página da aplicação, entre na aba **Main Settings**.
4. Habilite o switch **Edge Functions** para ativar esse módulo.
5. Clique em **Save** no canto inferior direito da página.

Aparecerá uma mensagem indicando que a edge application foi atualizada com sucesso.
</Fragment>

<Fragment slot="panel.rtm">
1. No canto superior esquerdo da página, selecione **Products menu** > **Edge Application** na seção de **BUILD**.
2. Na lista de edge applications, selecione aquela na qual deseja configurar a integração Fauna.
3. Na página da aplicação, entre na aba **Main Settings**.
4. Habilite o switch **Edge Functions** para ativar esse módulo.
5. Clique em **Save** no canto inferior direito da página.

Aparecerá uma mensagem indicando que a edge application foi atualizada com sucesso.
</Fragment>

</Tabs>

:::caution[Atenção]
Se qualquer produto ou módulo for ativado, pode gerar custos relacionados ao uso. Consulte a [página de preços](/pt-br/documentacao/produtos/precos/) para obter mais informações.
:::

---

## Instancie a integração

Para instanciar sua integração, ainda na página **Edge Application**, siga os passos abaixo:

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Selecione a aba **Functions Instances**.
2. Clique no botão **+ Function Instance**.
3. Escolha um nome fácil de lembrar para a sua função.
4. No menu suspenso, selecione a integração **Fauna**.

Esta ação irá carregar a aba **Arguments**, onde você pode adicionar os parâmetros para executar sua aplicação.

Esses argumentos em JSON são parametrizáveis através dos *request headers*: `x-secret` (a chave que você tem no painel da Fauna) e `x-db-name` (nome da base de dados que você criará na Fauna).

5. Quando estiver pronto, clique no botão **Save**.

Aparecerá uma mensagem indicando que a edge function foi salva.
</Fragment>

<Fragment slot="panel.rtm">
1. Selecione a aba **Functions**.
2. Clique no botão **Add Function**.
3. Escolha um nome fácil de lembrar para a sua função.
4. No menu suspenso, selecione a integração **Fauna**.

Esta ação irá carregar a integração, mostrando uma caixa com o código-fonte dela e, logo acima, duas abas: **Code** e **Args**. Ao clicar na aba **Code**, será possível navegar pelo código, contudo sem a possibilidade de alterá-lo. 

Esta integração funciona sem a configuração da aba **Args**. Esses Args em JSON são parametrizáveis através dos *request headers*: `x-secret` (a chave que você tem no painel da Fauna) e `x-db-name` (nome da base de dados que você criará na Fauna).

5. Quando estiver pronto, clique no botão **Save**.

Aparecerá uma mensagem indicando que a edge function foi salva.
</Fragment>

</Tabs>

---

## Configure uma regra para Rules Engine

Agora você deve configurar uma regra para **Rules Engine** como a **criteria** e **behavior** que vai executar sua função.

Ainda na página **Edge Application**, siga estes passos:

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Selecione a aba **Rules Engine**.
2. Clique em **Default Rule**.
    - Note que você não pode alterar a **Default Rule**.
3. No campo *behavior*, selecione **Run Function** no menu suspenso e selecione a função da Fauna, de acordo com o nome que você deu no passo de instanciação.
4. Clique no botão **Save**.

Aparecerá uma mensagem indicando que a edge application foi atualizada com sucesso.
</Fragment>

<Fragment slot="panel.rtm">
1. Selecione a aba **Rules Engine**.
2. Clique em **Default Rule**.
    - Note que você não pode alterar a **Default Rule**.
3. No campo *behavior*, selecione **Run Function** no menu suspenso e selecione a função da Fauna, de acordo com o nome que você deu no passo de instanciação.
4. Clique no botão **Save**.

Aparecerá uma mensagem indicando que a edge application foi atualizada com sucesso.
</Fragment>

</Tabs>