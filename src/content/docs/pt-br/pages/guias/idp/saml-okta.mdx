---
title: Como utilizar Okta SAML como um IdP para o Real-Time Manager
description: Guia para configurar a aplicação personalizada Okta como um IdP para o Real-Time Manager.
meta_tags: accounts, users authentication, SAML, okta
namespace: documentation_sso_okta_saml
permalink: /documentacao/produtos/guias/sso-okta-saml/
---

O Okta Identity Provider (IdP) é uma entidade confiável que permite habilitar o logon único para acessar outros sites ou serviços, como os da Azion. Seus usuários podem continuar usando suas identidades corporativas sem precisar lembrar de uma senha específica ou digitar credenciais cada vez que forem acessar o **Real-Time Manager (RTM)**. 

:::caution[atenção]
Mesmo se você estiver utilizando um IdP, é necessário registrar todos os usuários da conta no RTM, pois eles são sincronizados no RTM e no IdP. Um usuário inexistente no RTM não conseguirá realizar o login. 
:::

Ao utilizar um IdP, você tem dois tipos de protocolos disponíveis: Security Assertion Markup Language (SAML) e OpenID Connect (OIDC).

Para configurar uma aplicação Okta personalizada como IdP de sua conta no RTM, siga os próximos passos.

---

## Configure a aplicação SAML no Okta Admin Console

1. Acesse [Okta Admin Console](https://login.okta.com/).
2. Na homepage, em **Applications**, selecione **Applications**. 
3. Selecione **Create App Integration**.
4. No modal, selecione a opção **SAML 2.0** e clique **Next**.
5. Dê um nome para sua aplicação. Exemplo: `Azion SAML`.
6. Clique no botão **Next**.
7. Na seção **General**, adicione uma URL provisória no campo **Single sign-on URL**. A URL correta será gerada pelo RTM mais tarde. Exemplo: `https://sso.azion.com`.
8. Repita o passo anterior para o campo **Audience URI (SP Entity ID)**.
9. Navegue até a seção **Attribute Statements** e preencha os campos como descrito:
    - **Name**: `email`
    - **Name format**: Basic
    - **Value**: `user.email`
10. Clique no botão **Next**.
11. Preencha a seção **Feedback** como necessário.
12. Clique no botão **Finish**.

:::note
Você precisará salvar alguns metadados gerados pelo Okta que serão necessários ao criar um IdP no RTM. Abra um programa de edição de texto para armazenar temporariamente os dados e siga as etapas abaixo.
:::

13. Depois que você for redirecionado aos detalhes da aplicação, clique na aba **Sign On**.
14. Na seção **Metadata details**, clique **More details**.
15. Copie os metadados a seguir e cole no programa de edição de texto:
    - **Sign on URL**, no formato `https://nome-da-conta.okta.com/app/id-app/sso/saml`.
    - **Issuer**, no formato `http://www.okta.com/id-app`.
16. Na seção **SAML Signing Certificates**, localize o certificado ativo ou gere um novo.
17. Para o certificado ativo que você quiser usar com o RTM, clique **Actions** > **View IdP metadata**.
18. Copie o valor dentro da tag XML `<ds:X509Certificate>` e cole no programa de edição de texto.

---

## Configure o Identity Provider no RTM

:::note
Você deve ser **Account Owner** no RTM para realizar essas configurações.
:::

1. [Acesse o RTM](/pt-br/documentacao/produtos/guias/como-acessar-o-rtm/) > **Account menu**.
2. Selecione **SSO Management**.
3. Clique no botão **Add Identity Provider** e selecione **SAML**.
4. Dê um nome a seu provedor de identidade. Exemplo: `Okta IdP SAML`.
5. Preencha os seguintes campos com os dados copiados do Okta Admin Console:

    - No campo **Identity provider's Entity ID URI**, preencha com a URL do **Issuer**.
    - No campo **Sign-in URL**, preencha com a **Sing on URL**.
    - No campo **Certificate**, cole o certificado. Inclua as tags `-----BEGIN CERTIFICATE-----` no início e `-----END CERTIFICATE-----` no fim, separando ambas as tags do certificado por uma quebra de linha.

6. Clique no botão **Save**. 
- Você será redirecionado para a página inicial do **SSO Management**, onde verá a lista de todos os provedores de identidade criados na conta. 
7. Para conectar o IdP do RTM com a aplicação personalizado do Okta, clique nos três pontos no canto do card do IdP e selecione **Edit**.

---

## Complete o registro da aplicação no Okta Admin Console

1. No [Okta Admin Console](https://login.okta.com/), acesse a aplicação criada para o uso de SSO no RTM e navegue até a aba **General**.
2. Localize a seção **SAML Settings** e clique em **Edit**.
3. Clique no botão **Next**.
4. Copie o valor do campo **Assertion Consumer Service URL** gerado no IdP do RTM e cole no campo **Single sign-on URL** no Okta Admin Console.
5. Copie o valor do campo **Service Provider's Entity ID URI** gerado pelo IdP no RTM e cole no campo **Audience URI (SP Entity ID)** no Okta Admin Console.
6. Clique no botão **Next**.
7. Clique no botão **Finish**.

---

## Adicione usuários à aplicação SAML Okta

1. No [Okta Admin Console](https://login.okta.com/), acesse a aplicação criada para o uso de SSO no RTM e navegue até a aba **Assignments**.
2. Para atribuir usuários à aplicação SAML, clique no botão dropdown **Assign** e escolha **Assign to People**.

:::tip
Você também pode criar um grupo para usuários da Azion no Okta para facilitar o gerenciamento de SSO.
:::

3. Clique em **Assign** para os usuários que deseja adicionar da lista.
- O email configurado no Okta deve ser o mesmo email registrado para o usuário no RTM.
4. Clique no botão **Save and Go Back**.
5. Repita os passos anteriores para cada usuário que deseja acionar a aplicação SAML para o RTM.

---

## Ative o Identity Provider no RTM

1. De volta ao RTM, acesse a página [SSO Management](https://manager.azion.com/iam/sso/identity-providers).
2. Na caixa do provedor de identidade que você adicionou, clique em **Activate and turn on identity Origin** e em **Confirm**.

Assim, todos os usuários da conta, exceto o **Account Owner**, terão acesso ao RTM utilizando o Okta como provedor de identidade.

:::note
Com a aplicação IdP ativada, a verificação MFA deixa de ser feita pelo RTM e começa a ser autenticada pelo IdP. Se a conta retornar para o SSO do RTM, será utilizada a última configuração ativa de MFA.
:::

---

import ContributorList from '~/components/ContributorList.astro'

**Contribuidores** <ContributorList>Contributor</ContributorList>
