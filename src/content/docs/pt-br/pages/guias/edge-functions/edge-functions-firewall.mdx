---
title: Como criar e configurar uma edge function em seu Edge Firewall
description: >-
  Edge Functions são funções executadas na borda da rede, mais perto do usuário.
  Elas auxiliam na segurança de suas aplicações através do Edge Firewall.
meta_tags: firewall
namespace: documentation_how_to_edge_functions_firewall
permalink: /documentacao/produtos/guias/edge-functions/firewall/
---

import Tabs from '~/components/tabs/Tabs'


**Edge Functions** são funções executadas no edge da rede, mais perto do usuário. Elas auxiliam na segurança de suas aplicações através do **Edge Firewall**.

Para usar functions no seu Edge Firewall, você deve seguir dois passos: 

- Criar uma edge function.
- Configurar os *behaviors* na página do Edge Firewall.

---

## Crie uma edge function

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Acesse o [Azion Console](/pt-br/documentacao/produtos/guias/como-acessar-o-azion-console/) > **Edge Functions**.
2. Clique em **+ Edge Function**.
3. Escolha um nome para a função.
4. Na aba **Code**, escreva sua função, ou simplesmente copie e cole o exemplo a seguir: 
    - A edge function a ser usada no firewall deve conter um *evento finalizador*, como apresentado a seguir.

    ```js
    addEventListener("firewall", (event) => {
        event.deny();
    });
    ```

5. Salve a função.

Agora, sua edge function pode ser usada em configurações do edge firewall.
</Fragment>

<Fragment slot="panel.rtm">
1. No [Real-Time Manager (RTM)](https://manager.azion.com/), no canto superior esquerdo, selecione **Edge Functions** dentro da seção **Edge Libraries**.
2. Clique em **Add a Function**.
3. Escolha um nome para a função.
4. Escreva sua função, ou simplesmente copie e cole o exemplo a seguir: 
    - A edge function a ser usada no firewall deve conter um *evento finalizador*, como apresentado a seguir.

    ```js
    addEventListener("firewall", (event) => {
        event.deny();
    });
    ```

5. Salve a função.

Agora, sua edge function pode ser usada em configurações do edge firewall.
</Fragment>

</Tabs>

---

## Configure uma edge function no Edge Firewall

Depois de criar uma edge function, você precisa configurar o edge firewall para implementá-la.

### Crie um edge firewall

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Acesse o [Azion Console](/pt-br/documentacao/produtos/guias/como-acessar-o-azion-console/) > **Edge Firewall**.
2. Clique em **+ Edge Firewall**.
3. Escolha um nome para o edge firewall.
4. Escolha os domínios aos quais você deseja implementar as regras.
5. Habilite o uso do módulo **Edge Functions**.
6. Ative o edge firewall e clique em **Save**.

Após salvar a configuração, na mesma página, as abas **Functions** e **Rules Engine** ficam acessiveis.
</Fragment>

<Fragment slot="panel.rtm">

1. No [Real-Time Manager (RTM)](https://manager.azion.com/), no canto superior esquerdo, selecione **Edge Firewall** na seção **Secure**.
2. Clique em **Add Rule Set**.
3. Escolha um nome para o edge firewall.
4. Escolha os domínios aos quais você deseja implementar as regras.
5. Habilite o uso do módulo **Edge Functions**.
6. Ative o edge firewall e clique em **Save**.

Após salvar a configuração, na mesma página, as abas **Functions** e **Rules Engine** ficam acessiveis.
</Fragment>

</Tabs>

### Adicione uma edge function ao edge firewall

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Vá para a aba **Functions Instances**.
2. Clique em **+ Function Instance**.
3. Escreva um nome para sua instância.
4. Escolha a função desejada.
5. Clique no botao **Save**.
    - Apenas as funções com o *Initiator Type* definido como Edge Firewall são listadas.
6. Acesse a aba **Rules Engine**.
7. Selecione **+ Rules Engine**.
8. Escreva o nome da nova regra.
9. Configure o critério que será aplicado.
10. Defina o *behavior* para **Run Function** e selecione a função que será executada.
11. Clique no botão **Save**.
</Fragment>

<Fragment slot="panel.rtm">
1. Vá para a aba **Functions**.
2. Selecione **Add Function**. 
3. Escolha um **Instance Name**.
4. Escolha a função desejada.
5. Clique no botao **Save**.
    - Apenas as funções com o *Initiator Type* definido como Edge Firewall são listadas.
6. Acesse a aba **Rules Engine**.
7. Selecione **New Rule**.
8. Escreva o nome da nova regra.
9. Configure o critério que será aplicado.
10. Defina o *behavior* para **Run Function** e selecione a função que será executada.
11. Clique no botão **Save**.
</Fragment>

</Tabs>

:::note
As mudanças levam alguns instantes para serem propagadas.
:::

---

