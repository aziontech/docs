---
title: Como configurar sampling no Data Streaming
description: Configure a funcionalidade de Sampling para filtrar a porcentagem de dados que será transmitida.
meta_tags: data streaming, observe, observability, logs, sampling
namespace: docs_data_streaming_sampling
permalink: /documentacao/produtos/guias/observe/configure-sampling/
menu_namespace: observeMenu
---

Ao [configurar um streaming](/pt-br/documentacao/produtos/guias/como-usar-data-streaming/) e escolher associar todos os seus domínios, você pode configurar a opção de **Sampling** para filtrar a porcentagem de dados que será transmitida. Essa é uma opção viável para reduzir os custos da coleta e análise de dados.

:::caution[aviso]
Para habilitar Sampling em sua conta, você deve entrar em contato com a [equipe de vendas](https://www.azion.com/pt-br/contate-vendas/) e solicitar a funcionalidade.

Após ativar a função de Sampling, você só poderá ter um streaming ativo. Se você desativar a funcionalidade, poderá criar mais streamings novamente.
:::

---

## Via RTM

1. [Acesse o RTM](/pt-br/documentacao/produtos/guias/como-acessar-o-rtm/) > **Data Streaming**.
2. Para configurar o streaming, siga as etapas em [Como configurar as main settings do Data Streaming](xxx).
3. Em **Options**, escolha **All Domains**. Isso associará todos os domínios atuais e futuros da conta a este streaming.
4. Em **Sampling (%)**, adicione o valor da porcentagem de dados que deseja transmitir, de `0` a `100`. Exemplo: `60`.
    - O Data Streaming coletará dados aleatoriamente de acordo com a porcentagem escolhida.
5. Finalize a configuração da seção **Destination**.
6. Clique no botão **Save**.

---

## Via API

Para esta seção, você estará criando um streaming com um conector Apache Kafka via API. Veja outras opções de conectores na tabela [Data Streaming Endpoints](https://api.azion.com/#b9aac0c7-173a-462b-87f6-a18d6558d3e5).

1. Execute a seguinte requisição `GET` em seu terminal, substituindo `[VALOR DO TOKEN]` pelo seu [token pessoal](/pt-br/documentacao/produtos/guias/personal-tokens/):

```bash
curl --location 'https://api.azionapi.net/data_streaming/streamings' \
--header 'Accept: application/json; version=3' \
--header 'Authorization: Token [TOKEN VALUE]' \
--header 'Content-Type: application/json' \
--data '{
    "name": "Kafka Connector",
    "template_id": 2,
    "domain_ids": [1656613172],
    "data_source": "http",
    "endpoint": {
        "endpoint_type": "kafka",
        "kafka_topic": "mykafka.dts.topic",
        "bootstrap_servers": "infra.my.net:9094,infra.my.net:9094"
    },
    "all_domains": true,
    "sampling_percentage": 60
}'
```

2. Você receberá uma resposta semelhante a esta:

```json
{
  "results": {
    "id": 1594,
    "name": "Kafka Connector",
    "template_id": 2,
    "data_source": "http",
    "active": true,
    "endpoint": {
      "endpoint_type": "kafka",
      "use_tls": false,
      "kafka_topic": "mykafka.dts.topic",
      "bootstrap_servers": "infra.my.net:9094,infra.my.net:9094"
    },
    "all_domains": true,
    "sampling_percentage": 60
  },
  "schema_version": 3
}
```

Aguarde alguns minutos para que as alterações se propaguem e seu streaming será atualizado.

:::tip
Consulte a [documentação da API da Azion](https://api.azion.com/) e a [especificação OpenAPI](https://github.com/aziontech/azionapi-openapi/) para saber mais sobre o que a API da Azion pode oferecer.
:::
<br /><br />
---

import ContributorList from '~/components/ContributorList.astro'

**Contribuidores** <ContributorList>Contribuidor</ContributorList>