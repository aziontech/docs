---
title: Edge Connector
description: >-
  Edge Connector permite conectar sua origem a uma Edge Application. Uma origem representa o servidor de onde a Azion recupera seu conteúdo, como um serviço de armazenamento de objetos ou um servidor em nuvem.
meta_tags: 'Connector, Edge Computing, Edge, Origin'
namespace: documentation_products_edge_connector
permalink: /documentacao/produtos/secure/edge-connector/
---
import LinkButton from 'azion-webkit/linkbutton';

**Edge Connector** permite conectar sua origem a uma Edge Application. Uma origem representa o servidor de onde a Azion recupera seu conteúdo, como um serviço de armazenamento de objetos ou um servidor em nuvem.

Utilizando o Edge Connector, é possível conectar-se a diversos tipos de backends, incluindo Edge Storage e servidores HTTP. Os Edge Connectors também suportam a agregação de múltiplos componentes, atuando como um objeto de configuração integrado dentro das Edge Applications. Após conectar uma origem por meio de um Edge Connector, os edge nodes armazenam em cache o conteúdo do servidor de origem e o entregam aos usuários quando solicitado. Essa abordagem fornece uma maneira unificada de configurar e gerenciar as conexões de backend da sua aplicação na Azion.

## Implementação

| Escopo | Recurso |
| --- | --- |
| Primeiros passos com Edge Application | [Primeiros passos](/en/documentation/products/build/edge-application/first-steps/#origins) |
| Módulo Load Balancer | [Load Balancer](/en/documentation/products/build/edge-application/load-balancer/) |

---

## Tipo de Connector

Existem três opções para conectar sua origem:

- **HTTP**: Conecte-se a origens externas via protocolo HTTP seguro para entrega de dados.
- **Edge Storage**: Vincule seu bucket do Edge Storage.
- **Live Ingest**: Projetado para ingestão de vídeo ao vivo, permite selecionar a região de ingestão para otimizar a latência.

### HTTP

Permite conectar-se a servidores HTTP genéricos, oferecendo várias opções de configuração, incluindo:

- Múltiplos Endereços: Suporta múltiplos endereços de backend, com configurações individuais de porta HTTP/HTTPS e módulos.
- Opções de Conexão: Proporciona controle sobre resolução de DNS, política de transporte (HTTP/HTTPS), versão HTTP, host, prefixo de caminho, comportamento de redirecionamento e cabeçalhos para IP real e porta.
- Módulos Avançados: Habilita recursos como balanceamento de carga (usando métodos como round-robin, menor número de conexões, IP hash e suporte a tentativas e timeouts), Origin Shield (com IP ACL e HMAC) e HMAC para segurança adicional na comunicação com o backend.

#### Host Header

O cabeçalho `Host` é utilizado pela sua origem para identificar o *virtualhost* e localizar seu conteúdo ou aplicação. Ao configurar uma origem no [Azion Console](https://console.azion.com), é possível personalizar o valor enviado pela Azion no cabeçalho `Host`.

Se o campo **Host Header** for deixado em branco, a Azion utilizará o mesmo endereço especificado no campo **Address** como padrão. Se sua origem estiver configurada para responder a um *virtualhost* usando o mesmo endereço configurado no DNS, o campo **Host Header** pode ser deixado vazio.

Porém, se sua origem responder a um *virtualhost* em um endereço diferente do configurado no DNS, é necessário preencher um valor personalizado para o cabeçalho `Host` no formato FQDN, por exemplo, `www.seudominio.com`.

:::caution
Personalizar o cabeçalho `Host` é essencial se sua origem responder a um *virtualhost* em um endereço diferente do configurado no DNS.
:::

Alternativamente, é possível usar a variável `${host}` no campo **Host Header** para instruir os edge nodes a repassar o cabeçalho `Host` recebido dos visitantes para a origem. Essa configuração é útil se você possui múltiplos *virtualhosts* servidos pela mesma origem.

#### Path

**Path** permite especificar um caminho personalizado de onde os edge nodes solicitarão o conteúdo da sua origem. A Azion adiciona o **Path** à URI ao encaminhar a solicitação para sua origem, mas não adiciona a URI para as solicitações dos usuários. Por exemplo, se você determinar que o caminho da sua origem é `/secure` e configurar sua aplicação para ser entregue por `seudominio.com`, o caminho `/secure` não fará parte da solicitação do usuário final.

:::caution
A definição de um **Origin Path** é opcional. Se não especificado, apenas a URI raiz será considerada.
:::

#### Address

Para definir uma origem para seu conteúdo, é necessário especificar o endereço do seu servidor como um nome de domínio no formato FQDN ou um endereço IPv4/IPv6. Se você definiu a **Origin Protocol Policy** como **Enforce HTTP** ou **Enforce HTTPS**, é possível personalizar a porta de origem usando a notação `host:port`.

#### Protocol Policy

A arquitetura de entrega da Azion oferece flexibilidade para personalizar o tipo de conexão entre os edge nodes e sua origem conforme suas necessidades:

- **Preserve HTTP/HTTPS protocol**: mantém o mesmo protocolo de conexão (*HTTP ou HTTPS*) e portas usados pelos usuários ao acessar seu conteúdo na Azion. Garante continuidade entre a Azion e o servidor de origem.
- **Enforce HTTP**: com essa configuração, a conexão entre os edge nodes da Azion e sua origem será exclusivamente via HTTP, independentemente do protocolo e portas usados pelos usuários para acessar o conteúdo da Azion. É possível personalizar uma porta específica para sua origem no campo **Address**, diferente da porta padrão (80 para HTTP) se desejado.
- **Enforce HTTPS**: exige que a conexão entre os edge nodes da Azion e sua origem seja exclusivamente via HTTPS, independentemente do protocolo e portas usados pelos usuários para acessar o conteúdo da Azion. É possível personalizar uma porta específica para sua origem no campo **Address**, diferente da porta padrão (443 para HTTPS) se necessário.

#### HMAC Authentication

Para **Single Origin**, se a origem estiver em um armazenamento de objetos com acesso privado, é necessário fornecer credenciais de autenticação HMAC. Ao habilitar a autenticação HMAC, seu conteúdo privado passará a ser entregue aos usuários por meio da **Edge Application**.

Você deve incluir nas credenciais de acesso HMAC fornecidas pelo seu provedor de armazenamento: **Region**, **Access Key** e **Secret Key**.

:::note
A **Secret Key** é protegida, sendo exibida apenas para usuários com permissão de escrita e mantendo a segurança de acesso.
:::

#### Timeouts

Exibe a configuração de timeout em segundos pré-definida pela Azion. Para personalizar os valores de timeout, [contate o time de suporte](https://tickets.azion.com/en/support/login).

#### Modules

##### Load Balancer

Quando **HTTP** é selecionado como tipo de connector, é possível configurar o **Balancing Method** para determinar como grandes volumes de requisições são distribuídos entre os endereços, adicionar múltiplos **Addresses** ao seu Edge Connector e alterar o **Server Role** e **Weight** de cada endereço.

<LinkButton link="/pt-br/documentacao/produtos/build/edge-application/load-balancer/" label="Saiba mais sobre Load Balancer" />

##### Origin Shield

Origin Shield fornece uma lista de endereços IP/CIDR usados exclusivamente pela Azion em sua infraestrutura distribuída, garantindo que apenas IPs confiáveis da Azion tenham acesso permitido. A lista é mantida pela Azion e disponibilizada via Azion Console e API. Os clientes são responsáveis por automatizar as atualizações de suas políticas de segurança para mantê-las alinhadas com os endereços atuais do Origin Shield.

#### Atributos

Abaixo estão os atributos da [Edge Connector API](https://api.azion.com/v4#/operations/GetEdgeConnectorConnectors) ao utilizar o tipo de connector HTTP.

| Atributo | Descrição | Exemplo/Valores |
|-----------|-------------|----------------|
| `addresses` | Lista de endereços de backend com detalhes de configuração. | – |
| `active` | Indica se o endereço está ativo. | `true`, `false` |
| `address` | Endereço de backend (hostname ou IP). | `"string"` |
| `http_port` | Porta HTTP para o endereço de backend. | `80` |
| `https_port` | Porta HTTPS para o endereço de backend. | `443` |
| `modules` | Módulos aplicados no nível do endereço. | – |
| `load_balancer` | Configuração de load balancer para este endereço. | – |
| `server_role` | Função do servidor para balanceamento de carga. | `"primary"` |
| `weight` | Peso do servidor usado no balanceamento de carga. | `1` |
| `connection_options` | Especifica opções de conexão para conexões de backend. | – |
| `dns_resolution` | Política de resolução de DNS para a conexão de backend. | `"preserve"` |
| `transport_policy` | Preferência de protocolo de transporte (HTTP/HTTPS). | `"preserve"` |
| `http_version_policy` | Versão HTTP a ser usada na conexão. | `"http1_1"` |
| `host` | Cabeçalho Host enviado ao backend. | `"${host}"` |
| `path_prefix` | Prefixo adicional a ser adicionado ao caminho. | `""` |
| `following_redirect` | Indica se redirecionamentos do backend são seguidos. | `false` |
| `real_ip_header` | Cabeçalho usado para transmitir o IP real do cliente. | `"X-Real-IP"` |
| `real_port_header` | Cabeçalho usado para transmitir a porta de origem do cliente. | `"X-Real-PORT"` |
| `modules` | Módulos avançados para manipulação de conexão de backend. | – |
| `load_balancer` | Configurações de load balancer. | – |
| `enabled` | Indica se o balanceamento de carga está habilitado. | `false` |
| `config` | Opções de configuração do load balancer. | – |
| `method` | Método de balanceamento de carga. | `"round_robin"` |
| `max_retries` | Número máximo de tentativas para conexões de backend. | `0` |
| `connection_timeout` | Timeout em segundos para estabelecer conexão. | `60` |
| `read_write_timeout` | Timeout em segundos para operações de leitura/escrita. | `120` |
| `origin_shield` | Configurações do Origin Shield. | – |
| `enabled` | Indica se o Origin Shield está habilitado. | `false` |
| `config` | Opções de configuração do Origin Shield. | – |
| `origin_ip_acl` | Configuração de IP ACL para Origin Shield. | – |
| `enabled` | Habilita IP ACL para Origin Shield. | `false` |
| `hmac` | Configuração HMAC para Origin Shield. | – |
| `enabled` | Indica se a segurança HMAC está habilitada. | `false` |
| `config` | Opções de configuração HMAC. | – |
| `type` | Tipo de HMAC. | `"aws4_hmac_sha256"` |
| `attributes` | Conjunto de credenciais HMAC. | – |
| `region` | Região AWS para HMAC. | `"string"` |
| `service` | Serviço AWS para HMAC. | `"s3"` |
| `access_key` | Chave de acesso AWS para HMAC. | `"string"` |
| `secret_key` | Chave secreta AWS para HMAC. | `"string"` |

---

### Edge Storage

Quando **Edge Storage** é selecionado como tipo de origem, é necessário adicionar o **Bucket Name** e o **Prefix**.

O nome do bucket é definido ao [criar ou modificar um bucket Edge Storage](/pt-br/documentacao/produtos/guias/criar-e-modificar-um-bucket/).

O prefixo é o caminho para a pasta dentro do bucket que armazena os objetos. Este campo pode ser deixado em branco caso deseje que a origem da aplicação seja a raiz do bucket.

#### Atributos

Abaixo estão os atributos da [Edge Connector API](https://api.azion.com/v4#/operations/GetEdgeConnectorConnectors) ao utilizar o tipo de connector Edge Storage.

| Atributo | Tipo   | Descrição                     |
|-----------|--------|------------------------------|
| bucket    | String | O nome do bucket.            |
| prefix    | String | O caminho de prefixo do bucket. |

<LinkButton link="/pt-br/documentacao/produtos/store/edge-storage/" label="Ir para referência Edge Storage" />

### Live Ingest

Este tipo de connector pode ser utilizado em cenários onde provedores de conteúdo exigem alta fidelidade e baixa latência, como eventos ao vivo, e-sports e conteúdos educacionais. Suporta ingestão de streams de vídeo ao vivo e permite a seleção da região de ingestão para otimizar a latência. A plataforma utiliza uma rede de edge locations para melhorar a eficiência e escalabilidade da entrega, além de fornecer recursos de segurança para proteção do stream. Para utilizar este tipo de connector, selecione a região de ingestão preferida para minimizar a latência, inicie o streaming do seu vídeo ao vivo usando o endpoint apropriado e monitore o desempenho para garantir a entrega ideal.

<LinkButton link="(/pt-br/documentacao/arquiteturas/live-streaming-delivery/live-streaming-delivery-com-hls/" label="Ir para a solução Live Ingest" />

---
```