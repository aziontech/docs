---
title: Certificados Wildcard Let's Encrypt na Plataforma Azion
description: >-
  Documentação técnica sobre o uso de certificados digitais wildcard da Let's Encrypt 
  para simplificar a gestão de certificados na plataforma Azion com automação, 
  segurança e escalabilidade.
meta_tags: "Let's Encrypt, wildcard certificates, DNS-01 challenge, certificate automation, Edge DNS"
namespace: documentation_wildcard_lets_encrypt_certificates
permalink: /documentacao/produtos/secure/firewall/certificados-wildcard-lets-encrypt/
---

import LinkButton from 'azion-webkit/linkbutton'
import LetsEncryptExpiration from '~/includes/snippets/LetsEncryptExpiration/pt/snippet.mdx'

A gestão de certificados SSL/TLS é fundamental para garantir conexões seguras entre clientes e servidores. No contexto de ambientes distribuídos e de alta disponibilidade, como os oferecidos pela Azion, a administração de múltiplos certificados pode se tornar complexa e onerosa. Os certificados wildcard, emitidos pela Let's Encrypt, permitem proteger um domínio e todos os seus subdomínios com um único certificado, simplificando significativamente essa gestão.

Esta documentação demonstra como o uso de certificados digitais wildcard da Let's Encrypt pode simplificar a gestão de certificados para os clientes da Azion, proporcionando automação, segurança e escalabilidade.

---

## O que são Certificados Wildcard?

Um certificado wildcard é um tipo de certificado SSL que cobre não apenas o domínio principal, mas também todos os seus subdomínios. Por exemplo, um certificado emitido para `*.exemplo.com` protegerá:

- `www.exemplo.com`
- `blog.exemplo.com`
- `loja.exemplo.com`
- E quaisquer outros subdomínios

Ao utilizar um certificado wildcard, não é necessário emitir e renovar certificados individuais para cada subdomínio, o que facilita a administração e reduz os riscos de configurações inconsistentes.

---

## Vantagens dos Certificados Wildcard Let's Encrypt

### Simplificação na Gestão de Certificados

- **Redução do Número de Certificados**: Um único certificado pode abranger todos os subdomínios, eliminando a necessidade de gerenciar múltiplos certificados.
- **Renovação Automatizada**: A emissão e renovação são realizadas automaticamente pela plataforma da Azion, garantindo que a segurança não seja comprometida por vencimentos não gerenciados.
- **Redução de Riscos de Rate Limits**: Ao gerar potencialmente menos certificados diferentes para os subdomínios, o mecanismo contribui para reduzir a probabilidade de atingir os limites de emissão do serviço Let's Encrypt.

### Economia de Tempo e Recursos

- **Menos Configurações Manuais**: A consolidação de certificados torna a configuração e manutenção mais simples, liberando tempo para a equipe de TI focar em outras demandas.
- **Redução de Custos**: A obtenção e manutenção dos certificados gratuitos pela Let's Encrypt eliminam custos associados a certificados pagos e a complexidade administrativa de múltiplas renovações.

### Escalabilidade e Flexibilidade

- **Facilidade para Ambientes Dinâmicos**: Em cenários onde novos subdomínios são criados com frequência (por exemplo, microsserviços ou ambientes de desenvolvimento/teste), os certificados wildcard oferecem a flexibilidade necessária para acompanhar essa evolução sem a necessidade de ajustes constantes.
- **Integração com a Plataforma Azion**: A gestão centralizada dos certificados, integrada à plataforma da Azion, permite uma implantação rápida e segura, além da automação na renovação.

---

## Emissão Automatizada na Plataforma Azion

Na Azion, a emissão de certificados Let's Encrypt é totalmente automatizada, utilizando o challenge DNS-01 para validação do domínio. Ao optar por esta solução, os clientes dispõem de uma integração nativa que elimina a necessidade de intervenção manual na criação dos registros DNS TXT.

### Processo de Emissão Automatizada

#### 1. Configuração da Zona DNS

Para que a emissão automática funcione, a zona DNS do cliente deve estar configurada e ativa no [Azion Edge DNS](/pt-br/documentacao/produtos/secure/edge-dns/). Essa configuração permite que a plataforma tenha controle total sobre os registros DNS necessários para a validação.

#### 2. Validação via Challenge DNS-01

Durante o processo de emissão, a plataforma Azion gera automaticamente o registro TXT requerido para o challenge DNS-01. Essa entrada é inserida na zona DNS de forma automatizada, sem a necessidade de ações adicionais por parte do cliente.

#### 3. Emissão do Certificado

Com a validação concluída automaticamente, o certificado wildcard é emitido e disponibilizado para uso em todos os subdomínios do domínio principal. Essa abordagem centralizada resulta na emissão de menos certificados, contribuindo para reduzir o risco de atingimento dos limites de emissão do serviço Let's Encrypt.


---

## Integração e Gestão Centralizada

A plataforma da Azion integra de forma nativa a emissão e renovação dos certificados, centralizando todo o processo e proporcionando uma gestão mais eficiente.

### Automação Completa

Uma vez que a zona DNS esteja devidamente configurada no Azion Edge DNS, o gerenciamento dos registros TXT necessários para o challenge é feito automaticamente. Isso elimina a necessidade de manipulação manual e reduz riscos de erros de configuração.

### Monitoramento e Renovação

A Azion realiza o monitoramento contínuo dos certificados emitidos. Quando a renovação se aproxima, a plataforma inicia o processo de validação novamente e atualiza automaticamente o certificado, garantindo que a segurança das conexões permaneça ininterrupta.

### Redução de Emissões

Ao centralizar a emissão e gerenciamento dos certificados wildcard, a plataforma minimiza a quantidade de certificados diferentes gerados, o que, por sua vez, diminui a probabilidade de atingir os limites de emissão do Let's Encrypt.

### Facilidade de Implantação

A integração com o ambiente de gerenciamento da Azion possibilita que os certificados sejam facilmente associados aos domínios e subdomínios dos clientes, mantendo a consistência e a conformidade com as políticas de segurança.

<LinkButton link="/pt-br/documentacao/produtos/guias/secure/certificado-digital/" label="consulte o guia sobre obter e registrar um digital certificate" severity="secondary" />

---

## Riscos e Cuidados de Segurança

Embora os certificados wildcard ofereçam conveniência significativa ao proteger ilimitados subdomínios com um único certificado, é fundamental compreender os riscos de segurança associados e implementar as devidas precauções.

### Principais Riscos de Segurança

#### 1. Comprometimento da Chave Privada ("Chave Mestra")

**Risco**: O certificado wildcard utiliza a mesma chave privada para todos os subdomínios, criando um ponto único de falha.

- **Movimentação Lateral**: Se um atacante comprometer um servidor de menor segurança (como `dev.exemplo.com`), ele terá acesso à chave privada que também protege sistemas críticos (`pagamentos.exemplo.com`, `login.exemplo.com`).
- **Impersonificação**: Com a chave privada comprometida, atacantes podem criar subdomínios maliciosos que serão considerados confiáveis pelos navegadores, facilitando ataques de phishing e man-in-the-middle.

#### 2. Violação do Princípio do Menor Privilégio

**Risco**: A distribuição da mesma chave privada para múltiplos servidores aumenta a superfície de ataque.

- **Distribuição Ampla**: Quanto mais servidores utilizam a mesma chave, maior o risco de exposição.
- **Acesso Humano**: Mais administradores terão acesso à chave, aumentando a probabilidade de vazamento por erro humano.

#### 3. Riscos Específicos da Validação DNS-01

**Risco**: A automação da renovação requer credenciais de API do provedor DNS.

- **Exposição de Credenciais**: Se o servidor for comprometido e as credenciais da API DNS não estiverem adequadamente protegidas, atacantes podem ganhar controle total sobre o domínio.
- **Controle de DNS**: Acesso às credenciais DNS permite redirecionamento de tráfego e manipulação de registros.

#### 4. Impacto da Revogação

**Risco**: A revogação de um certificado wildcard afeta todos os serviços simultaneamente.

- **Interrupção Geral**: Todos os subdomínios protegidos pelo certificado ficam indisponíveis até a substituição completa.
- **Janela de Vulnerabilidade**: O processo de substituição em múltiplos servidores pode criar períodos de exposição.

### Boas Práticas de Segurança na Azion

Para mitigar esses riscos ao utilizar certificados wildcard na plataforma Azion:

#### 1. Arquitetura Centralizada

- **Edge Application**: Utilize o certificado wildcard apenas no nível do Edge Application da Azion, mantendo a chave privada centralizada na infraestrutura de edge.
- **Proxy Reverso**: Configure o certificado no load balancer ou proxy reverso, evitando distribuição da chave para servidores de origem.

#### 2. Gestão Segura de Credenciais DNS

- **Permissões Restritas**: Configure credenciais de API DNS com permissões mínimas, limitadas apenas aos registros `_acme-challenge`.
- **Rotação Regular**: Implemente rotação periódica das credenciais de API DNS.

#### 3. Monitoramento e Auditoria

- **Certificate Transparency**: Monitore logs públicos de transparência de certificados para detectar emissões não autorizadas.
- **Alertas de Segurança**: Configure alertas para mudanças não programadas nos certificados.

#### 4. Segmentação de Ambientes

- **Certificados Específicos para Produção**: Considere usar certificados individuais para sistemas críticos de produção.
- **Isolamento de Desenvolvimento**: Mantenha ambientes de desenvolvimento com certificados separados.

### Comparativo: Wildcard vs. Certificados Individuais

| Característica | Certificado Wildcard | Certificados Individuais |
|---|---|---|
| **Conveniência** | Alta (um certificado para todos) | Baixa (um certificado por serviço) |
| **Segurança** | Risco concentrado | Isolamento de falhas |
| **Gestão da Chave** | Chave replicada | Chave única por serviço |
| **Impacto de Comprometimento** | Afeta todo o domínio | Afeta apenas um subdomínio |
| **Complexidade Operacional** | Baixa | Alta |

### Recomendações da Azion

A Azion recomenda o uso de certificados wildcard em cenários onde:

- A gestão centralizada é prioritária
- Os subdomínios são gerenciados pela mesma equipe
- Existe uma arquitetura de proxy reverso bem definida
- As políticas de segurança permitem o compartilhamento controlado de chaves

Para ambientes com requisitos de segurança mais rigorosos, considere a implementação de certificados individuais para sistemas críticos, mantendo wildcards apenas para serviços de menor criticidade.

---

## Considerações Finais

A adoção de certificados wildcard da Let's Encrypt, em conjunto com a emissão automatizada da plataforma Azion, oferece uma solução robusta e econômica para simplificar a gestão de certificados. Ao integrar o processo de validação via challenge DNS-01 com o gerenciamento centralizado de zonas DNS no Azion Edge DNS, as empresas podem alcançar uma infraestrutura mais segura, eficiente e escalável, minimizando intervenções manuais, otimizando recursos e reduzindo os riscos associados aos limites de emissão do serviço Let's Encrypt.

---

## Perguntas Frequentes (FAQ)

### Q1: O que acontece se a zona DNS do cliente não estiver configurada no Azion Edge DNS?

**A1**: Se a zona DNS não estiver ativa na plataforma Azion, a automação da emissão não será possível e o processo de validação deverá ser realizado manualmente. É essencial que a zona DNS esteja corretamente configurada para aproveitar a automação.

### Q2: Como a automação garante a segurança dos certificados?

**A2**: A emissão automatizada elimina o risco de falhas manuais na criação dos registros TXT, garantindo que a validação via challenge DNS-01 seja realizada de forma correta e segura, mantendo a integridade do processo de renovação.

### Q3: De que forma a automação reduz o risco de atingir os limites do serviço Let's Encrypt?

**A3**: Ao utilizar certificados wildcard para abranger todos os subdomínios, a plataforma Azion gera potencialmente menos certificados diferentes. Essa redução na quantidade de emissões diminui a chance de ultrapassar os limites impostos pelo serviço Let's Encrypt.

### Q4: Posso acompanhar o status da emissão e renovação dos certificados?

**A4**: Sim, a plataforma Azion oferece ferramentas de monitoramento que permitem acompanhar o status de emissão e renovação de certificados por meio de **API e console web**, facilitando a identificação de possíveis problemas e a rápida implementação de soluções.

### Q5: Como posso mitigar os riscos de segurança ao usar certificados wildcard?

**A5**: Para mitigar riscos, utilize certificados wildcard apenas no nível do Edge Application da Azion, mantenha credenciais DNS com permissões restritas, monitore logs de transparência de certificados e considere certificados individuais para sistemas críticos de produção. A arquitetura centralizada da Azion ajuda a reduzir a exposição da chave privada.

---

Esta documentação foi elaborada para fornecer um entendimento detalhado sobre como a emissão automatizada de certificados wildcard da Let's Encrypt, integrada à plataforma Azion, simplifica a gestão de certificados. Ao centralizar e automatizar todo o processo, a Azion possibilita que as empresas mantenham uma infraestrutura segura e eficiente, reduzindo intervenções manuais e mitigando riscos associados aos limites de emissão.
