---
title: Como escrever edge functions
description: Siga o passso a passo para desenvolver uma edge function.
meta_tags: serverless functions, edge, javascript
namespace: documentation_dev_with_azion_lang_js
permalink: /documentacao/produtos/desenvolvimento-azion/linguagens/javascript/
menu_namespace: buildMenu
---

import Tabs from '~/components/tabs/Tabs'

:::caution[importante]
A Azion possui duas interfaces de usuário: Real-Time Manager e Console, que está em estágio de *Preview*. Atualmente, o Console está disponível apenas para planos de Developer e novas contas. Siga os passos de acordo com a interface de usuário que estiver utilizando.
:::

## Antes de começar

Para você começar e ter sucesso como um edge developer, é importante:

- Familiarizar-se com JavaScript.
- [Conhecer o conceito de Strict mode](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode).
- [Ter uma conta no Azion Console](/pt-br/documentacao/produtos/contas/criar-uma-conta/).

As edge functions funcionam sobre o [Azion Runtime](/pt-br/documentacao/devtools/runtime/visao-geral/), que é um conjunto de ferramentas que permitem o desenvolvimento no edge.

É fundamental conhecer a lista de APIs, métodos e tipos disponíveis. Saiba mais sobre o [Azion Runtime](/pt-br/documentacao/devtools/runtime/visao-geral/).

---

## Editor de Código

[O Edge Functions Code Editor](/pt-br/documentacao/produtos/edge-application/edge-functions/runtime-api/code-editor/) fornece uma experiência de desenvolvimento semelhante à que os desenvolvedores estão acostumados. A [integração entre Edge Functions e ChatGPT](/pt-br/documentacao/produtos/edge-application/edge-functions/runtime-api/ai-integration/) ajuda você a escrever, refatorar e revisar o código.

---

## Edge Functions e Edge Application

Para desenvolver sua primeira edge function para Edge Application:

<Tabs client:visible>
    <Fragment slot="tab.console">Console</Fragment>
    <Fragment slot="tab.rtm">Real-Time Manager</Fragment>

<Fragment slot="panel.console">
1. Acesse o [Azion Console](/pt-br/documentacao/produtos/guias/como-acessar-o-azion-console/) > **Edge Functions**.
2. Clique em **+ Edge Function**.
4. Escolha um nome para sua função.
5. Escreva sua função. Mas espere, antes disso, continue lendo:

**Escrever uma edge function**

Primeiro, as edge functions para Edge Application funcionam com base em um [fetch event](/pt-br/documentacao/produtos/edge-application/edge-functions/runtime-apis/javascript/fetch/). Ele é inicializado com uma função `addEventListener`, passando `fetch` como o tipo de evento e um evento. Por exemplo:

```javascript
  addEventListener('fetch', event => {
      event.respondWith(handleRequest(event.request));
    });
```

Em segundo lugar, é necessário definir o comportamento da função `handleRequest`. Esta função tem como assinatura o `event.request`. Esses dados podem ser usados posteriormente para implementar a lógica necessária, como:

- Manipular cookies.
- Implementar um comportamento com base no método de solicitação (POST, GET, PUT, DELETE).
- Acessar os metadados da requisição.

A função `handleRequest` pode ser definida como:

```javascript
  const html = `<!DOCTYPE html>
  <body>
    <h1>Hello World</h1>
    <p>This markup was generated by Azion - Edge Functions.</p>
  </body>`

  async function handleRequest(request) {
    return new Response(html, {
      headers: {
        "content-type": "text/html;charset=UTF-8",
      },
    })
  }
```

Neste exemplo, a resposta será o conteúdo HTML, declarado anteriormente pelo const `html`. Os headers também podem ser manipulados e, no exemplo, o `Content-Type` é definido.

5. Clique no botão **Save**.
</Fragment>

<Fragment slot="panel.rtm">
1. No [Real-Time Manager (RTM)](https://manager.azion.com/), no canto superior esquerdo, selecione **Edge Functions** na seção **Edge Libraries**.
2. Clique em **Add Function**.
3. Escolha um nome para sua função.
4. Escreva sua função. Mas espere, antes disso, continue lendo:

**Escrever uma edge function**

Primeiro, as edge functions para Edge Application funcionam com base em um [fetch event](/pt-br/documentacao/produtos/edge-application/edge-functions/runtime-apis/javascript/fetch/). Ele é inicializado com uma função `addEventListener`, passando `fetch` como o tipo de evento e um evento. Por exemplo:

```javascript
  addEventListener('fetch', event => {
      event.respondWith(handleRequest(event.request));
    });
```

Em segundo lugar, é necessário definir o comportamento da função `handleRequest`. Esta função tem como assinatura o `event.request`. Esses dados podem ser usados posteriormente para implementar a lógica necessária, como:

- Manipular cookies.
- Implementar um comportamento com base no método de solicitação (POST, GET, PUT, DELETE).
- Acessar os metadados da requisição.

A função `handleRequest` pode ser definida como:

```javascript
  const html = `<!DOCTYPE html>
  <body>
    <h1>Hello World</h1>
    <p>This markup was generated by Azion - Edge Functions.</p>
  </body>`

  async function handleRequest(request) {
    return new Response(html, {
      headers: {
        "content-type": "text/html;charset=UTF-8",
      },
    })
  }
```

Neste exemplo, a resposta será o conteúdo HTML, declarado anteriormente pelo const `html`. Os headers também podem ser manipulados e, no exemplo, o `Content-Type` é definido.

5. Clique no botão **Save**.
</Fragment>

</Tabs>

---

## Teste e depuração

Depois de escrever suas edge functions, você pode visualizar a resposta e inspecionar o código. O preview simula uma requisição e essa simulação pode ser alterada para atender às necessidades do desenvolvedor.

Saiba mais sobre o [Preview Deployment](/pt-br/documentacao/produtos/edge-application/edge-functions/runtime-api/preview-deployment/).

É possível debugar as funções através de:

- [Data Stream](/pt-br/documentacao/produtos/guias/debugging-functions-data-stream/)
- [GraphQL API](/pt-br/documentacao/produtos/guias/debugging-functions-graphql/)

---

## Function instantiation

Depois de salvar sua edge function, é necessário instanciá-la em uma edge application.

Saiba mais sobre como [instanciar uma edge function em uma edge application](/pt-br/documentacao/produtos/guias/build/instanciar-edge-functions/).

---

